angular.module("poketrainer",["poketrainer.Module.Templates","Poketrainer.Module.SocketEventEmitter","Poketrainer.Service.Navigation","Poketrainer.Service.SocketEvent","Poketrainer.Service.Socket","Poketrainer.Service.UserList","Poketrainer.State.Abstracts","Poketrainer.State.Status","Poketrainer.State.Users","ui.router","ngMaterial","ngMessages"]).config(["$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider","$mdThemingProvider",function(e,t,n,o){e.rule(function(e,t){var n=t.url().toLowerCase();if(!("/"===n[n.length-1]||n.indexOf("/?")>-1))return n.indexOf("?")>-1?n.replace("?","/?"):n+"/"}).otherwise("/"),n.strictMode(!1),o.theme("default").primaryPalette("blue").accentPalette("red")}]).run(["$state","$rootScope","$document",function(e,t,n){t.$on("inventory:updated",function(e,t){}),t.$on("$stateChangeStart",function(){n.find(".screen-loading-overlay").removeClass("hidden")}),t.$on("$stateChangeSuccess",function(){n.find(".screen-loading-overlay").addClass("hidden")}),t.$on("$stateChangeError",function(t,o,r,a,s,i){"offline"===i&&(e.go("public.users"),n.find(".screen-loading-overlay").removeClass("hidden"))})}]),angular.module("Poketrainer.Module.SocketEventEmitter",["Poketrainer.Service.Socket"]).run(["$rootScope","PokeSocket","SocketEvent",function(e,t,n){t.forward(n.UserStatus),t.on(n.Data,function(t){e.$broadcast(t.event+":"+t.action,t.data)})}]),angular.module("Poketrainer.State.Abstracts",["ui.router"]).config(["$stateProvider",function(e){e.state("public",{"abstract":!0,views:{header:{templateUrl:"states/abstracts/header.tpl.html",controller:"HeaderController"},content:{template:"<ui-view/>"}}})}]).controller("HeaderController",["$rootScope","$scope","$state","$stateParams","SocketEvent","PokeSocket","Navigation","UserList",function(e,t,n,o,r,a,s,i){t.navigation=s.primary.get(),t.state=n.current.name,t.user=i.getCurrent(),t.reload_api=function(){a.emit(r.Action,{username:t.user.username,action:"reload_api"})},t.reset_stats=function(){a.emit(r.Action,{username:t.user.username,action:"reset_stats"})},t.stop_bot=function(){a.emit(r.Action,{username:t.user.username,action:"stop_bot"})},t.start_bot=function(){a.emit(r.Action,{username:t.user.username,action:"start_bot"})},t.$on(r._prefix+r.UserStatus,function(e,n){i.update(n),t.user=i.getCurrent()}),e.$on("currentUser_:changed",function(){t.user=i.getCurrent()}),e.$on("$stateChangeSuccess",function(e,n,o,r,a){t.state=n.name});var u=function l(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(a.removeListener(r.UserList,l),i.set(e.users),t.user=i.getCurrent())};"public.users"!==t.state&&(a.on(r.UserList,u),a.emit(r.UserList))}]),angular.module("Poketrainer.State.Status",["ui.router","uiGmapgoogle-maps","chart.js","easypiechart","datatables","ui-leaflet","nemLogging","xeditable"]).config(["$stateProvider","uiGmapGoogleMapApiProvider",function(e,t){t.configure({v:"3.24",libraries:"weather,geometry,visualization"}),e.state("public.dashboard",{url:"/dashboard/:username",resolve:{locationData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,n,o){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"location"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return n.on(o.Request,a),n.emit(o.Request,{username:t.username,types:["location"]}),r.promise}],inventoryData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,n,o){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"inventory"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return n.on(o.Request,a),n.emit(o.Request,{username:t.username,types:["inventory"]}),r.promise}],playerData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,n,o){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return n.on(o.Request,a),n.emit(o.Request,{username:t.username,types:["player"]}),r.promise}],playerStatsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,n,o){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player_stats"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return n.on(o.Request,a),n.emit(o.Request,{username:t.username,types:["player_stats"]}),r.promise}],pokemonData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,n,o){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"pokemon"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return n.on(o.Request,a),n.emit(o.Request,{username:t.username,types:["pokemon"]}),r.promise}],fortsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,n,o){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"forts"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return n.on(o.Request,a),n.emit(o.Request,{username:t.username,types:["forts"]}),r.promise}],attacksData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,n,o){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"attacks"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return n.on(o.Request,a),n.emit(o.Request,{username:t.username,types:["attacks"]}),r.promise}]},controller:"DashboardController",templateUrl:"states/dashboard/dashboard.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("DashboardController",["$rootScope","$scope","$stateParams","$mdToast","$q","PokeSocket","leafletData","UserList","locationData","inventoryData","playerData","playerStatsData","pokemonData","fortsData","attacksData","SocketEvent","DTOptionsBuilder","editableOptions","editableThemes",function(e,t,n,o,r,a,s,i,u,l,c,d,p,m,f,v,k,g,_){i.setCurrent(n.username),e.$broadcast("currentUser_:changed"),_.bs3.inputClass="input-sm",_.bs3.buttonsClass="btn-sm",g.theme="bs3";var y=function(e,t){n.username==t.username&&"offline"==t.status&&$state.go("public.users")};t.$on(v._prefix+v.UserStatus,y),t.$on("$destroy",function(){a.emit(v.Leave,{room:n.username})}),a.emit(v.Join,{room:n.username});var b,h=function R(e){if(t.evolve_disabled=!1,t.transfer_disabled=!1,e.success)for(var n=t.pokemon.length-1;n>=0;n--)if(t.pokemon[n].id==b){t.pokemon.splice(n,1);break}b=0,a.removeListener("release_pokemon_by_id",R),o.show(o.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.transfer_disabled=!1,t.transfer=function(e){b=e,t.evolve_disabled=!0,t.transfer_disabled=!0,a.on("release_pokemon_by_id",h),a.emit(v.Action,{username:n.username,action:"release_pokemon_by_id",params:[e]})};var S=function M(e){t.evolve_disabled=!1,t.transfer_disabled=!1,a.removeListener("evolve_pokemon_by_id",M),o.show(o.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.evolve_disabled=!1,t.evolve=function(e){t.evolve_disabled=!0,t.transfer_disabled=!0,a.on("evolve_pokemon_by_id",S),a.emit(v.Action,{username:n.username,action:"evolve_pokemon_by_id",params:[e]})};var $=function O(e){t.snipe_disabled=!1,a.removeListener("snipe_pokemon",O),o.show(o.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.snipe_coords="",t.snipe_disabled=!1,t.snipe_auto=!1,t.snipe=function(e){t.snipe_disabled=!0,a.on("snipe_pokemon",$),a.emit(v.Action,{username:n.username,action:"snipe_pokemon",latlng:e})};var P,C=function j(e){if(t.upgrade_disabled=!1,a.removeListener("upgrade_pokemon_by_id",j),e.success){t.inventory.pokemon_candy[P.family_id]-=P.candy_needed_to_upgrade,t.player.currencies[1].amount-=P.dust_needed_to_upgrade;for(var n=t.pokemon.length-1;n>=0;n--)if(t.pokemon[n].id==e.upgraded_pokemon.id){t.pokemon[n]=e.upgraded_pokemon;break}}P={},o.show(o.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.upgrade_disabled=!1,t.upgrade=function(e){P=e,t.upgrade_disabled=!0,a.on("upgrade_pokemon_by_id",C),a.emit(v.Action,{username:n.username,action:"upgrade_pokemon_by_id",params:[e.id]})},t.nick_change_disabled=!1,t.nick_change=function(e,s){var i=r.defer(),u=function l(n){if(t.nick_change_disabled=!1,a.removeListener("nickname_pokemon_by_id",l),n.success){i.resolve(!0);for(var r=t.pokemon.length-1;r>=0;r--)if(t.pokemon[r].id==e){t.pokemon[r].name=s;break}}else i.reject(!1);o.show(o.simple().textContent(n.message).position("top center").hideDelay(3e3))};return t.nick_change_disabled=!0,a.on("nickname_pokemon_by_id",u),a.emit(v.Action,{username:n.username,action:"nickname_pokemon_by_id",params:[e,s]}),i.promise};var U,w,D=function J(e){if(t.set_favorite_disabled=!1,a.removeListener("set_favorite_pokemon_by_id",J),e.success)for(var n=t.pokemon.length-1;n>=0;n--)if(t.pokemon[n].id==U){t.pokemon[n].is_favorite=w;break}U=0,w=!1,o.show(o.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.set_favorite_disabled=!1,t.set_favorite=function(e,o){U=e,w=o,t.set_favorite_disabled=!0,a.on("set_favorite_pokemon_by_id",D),a.emit(v.Action,{username:n.username,action:"set_favorite_pokemon_by_id",params:[e,o]})},t.$on("inventory:updated",function(e,n){t.inventory=n,x()}),t.$on("player_stats:updated",function(e,n){t.playerStats=n,x()}),t.$on("player:updated",function(e,n){t.player=n,x()}),t.$on("pokemon:caught",function(e,n){var r=n;t.pokemon.push(r),x(),o.show(o.simple().textContent("Caught: "+r.name+" (IV: "+Math.floor(r.iv)+" | CP: "+r.cp+")").position("top center").hideDelay(3e3))}),t.$on("pokemon:released",function(e,n){for(var r=n,a=t.pokemon.length-1;a>=0;a--)t.pokemon[a].id==r.id&&t.pokemon.splice(a,1);x(),o.show(o.simple().textContent("Released: "+r.name+" (IV: "+Math.floor(r.iv)+" | CP: "+r.cp+")").position("top center").hideDelay(3e3))}),t.$on("pokemon:evolved",function(e,n){for(var r=n.old,a=n["new"],s=t.pokemon.length-1;s>=0;s--)t.pokemon[s].id==r.id&&t.pokemon.splice(s,1);t.pokemon.push(a),o.show(o.simple().textContent("Evolved: "+r.name+" to "+a.name+" (IV: "+Math.floor(a.iv)+" | CP: "+a.cp+")").position("top center").hideDelay(3e3))}),t.$on("fort:spun",function(e,t){o.show(o.simple().textContent("Fort spun, reward: "+t.reward).position("top center").hideDelay(3e3))});var L=0;t.$on("position:update",function(e,n){if(L++,L%1==0){t.markers.bot.lat=n[0],t.markers.bot.lng=n[1];var o={lat:n[0],lng:n[1]};t.paths.main.latlngs.push(o)}}),t.player=c,t.playerStats=d,t.inventory=l,t.pokemon=p,t.attacks=f;var x=function(){t.playerStats.xpPercent=Math.floor((t.playerStats.experience-t.playerStats.prev_level_xp)/(t.playerStats.next_level_xp-t.playerStats.prev_level_xp)*100),t.playerStats.uniquePokedexPercent=Math.floor(t.playerStats.unique_pokedex_entries/151*100),t.playerStats.pokemonInvPercent=Math.floor(t.pokemon.length/t.player.max_pokemon_storage*100),t.playerStats.itemsInvPercent=Math.floor(t.inventory.item_count/t.player.max_item_storage*100)};x(),t.$on("$viewContentLoaded",function(){s.getMap().then(function(e){setTimeout(function(){e.invalidateSize()},3e3)})}),t.map={center:{lat:u[0],lng:u[1],zoom:15}};for(var q={},E=0;E<m.length;E++){var A=m[E];1==A.type&&(A.enabled||A.lure_info)&&(q["fort_"+E]={lat:A.latitude,lng:A.longitude,message:A.latitude+", "+A.longitude,icon:{iconUrl:"assets/images/pstop.png",iconSize:[31,31],iconAnchor:[15,29]}})}q.bot={lat:u[0],lng:u[1],message:t.player.username,focus:!0,draggable:!1},t.markers=q,t.paths={main:{color:"#F44336",weight:4,latlngs:[{lat:u[0],lng:u[1]}]}},t.pokemonDataTableOptions=k.newOptions().withOption("order",[[0,"desc"]]).withOption("stateSave",!0),t.expLvlOptions={animate:{duration:1e3,enabled:!0},barColor:"#03A9F4",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.uniquePokedexOptions={animate:{duration:1e3,enabled:!0},barColor:"#FFC107",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.pokemonInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#009688",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.itemsInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#F44336",scaleColor:!1,lineWidth:10,lineCap:"circle"}}]),angular.module("Poketrainer.State.Users",["ui.router"]).config(["$stateProvider",function(e){e.state("public.users",{url:"/",resolve:{Users:["$q","$stateParams","PokeSocket","SocketEvent","UserList",function(e,t,n,o,r){var a=e.defer(),s=function i(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(n.removeListener(o.UserList,i),r.set(e.users),a.resolve())};return n.on(o.UserList,s),n.emit(o.UserList),a.promise}]},controller:"UsersController",templateUrl:"states/users/users.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("UsersController",["$scope","UserList","PokeSocket","SocketEvent",function(e,t,n,o){e.users=t.get(),t.setCurrent("");var r=function(n,o){e.users=t.update(o)};e.$on(o._prefix+o.UserStatus,r)}]),angular.module("Poketrainer.Service.Navigation",[]).factory("Navigation",function(){var e=[],t=function(){return e.sort(function(e,t){var n=e.Priority-t.Priority;return 0===n?e.Label.localeCompare(t.Label):n})},n=function(t,n,o,r,a){"string"!=typeof r&&(r="md md-chevron-right"),"string"!=typeof a&&(a=n),("number"!=typeof o||o<0)&&(o=10),e.push({Label:t,State:n,ActiveState:a,Priority:o,Icon:r})};return{primary:{get:t,register:n}}}),angular.module("Poketrainer.Service.SocketEvent",[]).factory("SocketEvent",function(){return{_prefix:"socket:",UserList:"users",UserStatus:"user_status",Request:"pull",Data:"push",Join:"join",Leave:"leave",Action:"action"}}),angular.module("Poketrainer.Service.UserList",[]).factory("UserList",function(){var e=[],t="",n=function(t){for(var n=0;n<t.length;n++)t[n].status="unknown";e=t.sort(function(e,t){return e.username.localeCompare(t.username)})},o=function(t){for(var n=0;n<e.length;n++)e[n].username==t.username&&(e[n].status=t.status);return e},r=function(){return e},a=function(e){t=e},s=function(){for(var n=0;n<e.length;n++)if(e[n].username==t)return e[n];return{}};return{set:n,update:o,get:r,setCurrent:a,getCurrent:s}}),angular.module("Poketrainer.Service.Socket",["btford.socket-io"]).factory("PokeSocket",["socketFactory","$location",function(e,t){var n=window.location.pathname.replace(/\/+$/g,"")+"/socket.io";return e({ioSocket:io.connect(window.location.protocol+"//"+window.location.host+"/poketrainer",{path:n})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZXMvbW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlci5qcyIsInN0YXRlcy9hYnN0cmFjdHMvc3RhdGUuYWJzdHJhY3RzLmpzIiwic3RhdGVzL2Rhc2hib2FyZC9zdGF0ZS5kYXNoYm9hcmQuanMiLCJzdGF0ZXMvdXNlcnMvc3RhdGUudXNlcnMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuTmF2aWdhdGlvbi5qcyIsIm1vZHVsZXMvc2VydmljZXMvc2VydmljZS5Tb2NrZXRFdmVudHMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuVXNlckxpc3QuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJydWxlIiwiJGluamVjdG9yIiwiJGxvY2F0aW9uIiwicGF0aCIsInVybCIsInRvTG93ZXJDYXNlIiwibGVuZ3RoIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJvdGhlcndpc2UiLCJzdHJpY3RNb2RlIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCJydW4iLCIkc3RhdGUiLCIkcm9vdFNjb3BlIiwiJGRvY3VtZW50IiwiJG9uIiwiZXZlbnQiLCJkYXRhIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsIlBva2VTb2NrZXQiLCJTb2NrZXRFdmVudCIsImZvcndhcmQiLCJVc2VyU3RhdHVzIiwib24iLCJEYXRhIiwiJGJyb2FkY2FzdCIsImFjdGlvbiIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJhYnN0cmFjdCIsInZpZXdzIiwiaGVhZGVyIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udGVudCIsInRlbXBsYXRlIiwiJHNjb3BlIiwiJHN0YXRlUGFyYW1zIiwiTmF2aWdhdGlvbiIsIlVzZXJMaXN0IiwibmF2aWdhdGlvbiIsInByaW1hcnkiLCJnZXQiLCJjdXJyZW50IiwibmFtZSIsInVzZXIiLCJnZXRDdXJyZW50IiwicmVsb2FkX2FwaSIsImVtaXQiLCJBY3Rpb24iLCJ1c2VybmFtZSIsInJlc2V0X3N0YXRzIiwic3RvcF9ib3QiLCJzdGFydF9ib3QiLCJfcHJlZml4IiwidXBkYXRlIiwidXNlckV2ZW50Q2IiLCJtZXNzYWdlIiwiaXNVbmRlZmluZWQiLCJzdWNjZXNzIiwiaXNBcnJheSIsInVzZXJzIiwicmVtb3ZlTGlzdGVuZXIiLCJzZXQiLCJ1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlciIsImNvbmZpZ3VyZSIsInYiLCJsaWJyYXJpZXMiLCJyZXNvbHZlIiwibG9jYXRpb25EYXRhIiwiJHEiLCJkIiwiZGVmZXIiLCJsb2NhdGlvbkRhdGFDYiIsInR5cGUiLCJmcm9tSnNvbiIsInJlamVjdCIsIlJlcXVlc3QiLCJ0eXBlcyIsInByb21pc2UiLCJpbnZlbnRvcnlEYXRhIiwiaW52ZW50b3J5RGF0YUNiIiwicGxheWVyRGF0YSIsInBsYXllckRhdGFDYiIsInBsYXllclN0YXRzRGF0YSIsInBsYXllclN0YXRzRGF0YUNiIiwicG9rZW1vbkRhdGEiLCJwb2tlbW9uRGF0YUNiIiwiZm9ydHNEYXRhIiwiZm9ydHNEYXRhQ2IiLCJhdHRhY2tzRGF0YSIsImF0dGFja3NEYXRhQ2IiLCJyZWdpc3RlciIsIiRtZFRvYXN0IiwibGVhZmxldERhdGEiLCJEVE9wdGlvbnNCdWlsZGVyIiwiZWRpdGFibGVPcHRpb25zIiwiZWRpdGFibGVUaGVtZXMiLCJzZXRDdXJyZW50IiwiYnMzIiwiaW5wdXRDbGFzcyIsImJ1dHRvbnNDbGFzcyIsInVzZXJFdmVudFVwZGF0ZSIsInN0YXR1cyIsIkxlYXZlIiwicm9vbSIsIkpvaW4iLCJ0cmFuc2Zlcl9wX2lkIiwidHJhbnNmZXJDYiIsImV2b2x2ZV9kaXNhYmxlZCIsInRyYW5zZmVyX2Rpc2FibGVkIiwiaSIsInBva2Vtb24iLCJpZCIsInNwbGljZSIsInNob3ciLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5IiwidHJhbnNmZXIiLCJwX2lkIiwicGFyYW1zIiwiZXZvbHZlQ2IiLCJldm9sdmUiLCJzbmlwZWRDYiIsInNuaXBlX2Rpc2FibGVkIiwic25pcGVfY29vcmRzIiwic25pcGVfYXV0byIsInNuaXBlIiwibGF0bG5nIiwidXBncmFkZV9wa20iLCJ1cGdyYWRlQ2IiLCJ1cGdyYWRlX2Rpc2FibGVkIiwiaW52ZW50b3J5IiwicG9rZW1vbl9jYW5keSIsImZhbWlseV9pZCIsImNhbmR5X25lZWRlZF90b191cGdyYWRlIiwicGxheWVyIiwiY3VycmVuY2llcyIsImFtb3VudCIsImR1c3RfbmVlZGVkX3RvX3VwZ3JhZGUiLCJ1cGdyYWRlZF9wb2tlbW9uIiwidXBncmFkZSIsInBrbSIsIm5pY2tfY2hhbmdlX2Rpc2FibGVkIiwibmlja19jaGFuZ2UiLCJuaWNrbmFtZSIsIm5pY2tfY2hhbmdlQ2IiLCJzZXRfZmF2b3JpdGVfcF9pZCIsInNldF9mYXZvcml0ZV9mYXZvcml0ZSIsInNldF9mYXZvcml0ZUNiIiwic2V0X2Zhdm9yaXRlX2Rpc2FibGVkIiwiaXNfZmF2b3JpdGUiLCJzZXRfZmF2b3JpdGUiLCJmYXZvcml0ZSIsInVwZGF0ZVBlcmNlbnRhZ2VzIiwicGxheWVyU3RhdHMiLCJwdXNoIiwiTWF0aCIsImZsb29yIiwiaXYiLCJjcCIsInBva2Vtb25fb2xkIiwib2xkIiwicG9rZW1vbl9uZXciLCJyZXdhcmQiLCJwb3NpdGlvblVwZGF0ZXMiLCJtYXJrZXJzIiwiYm90IiwibGF0IiwibG5nIiwibmV3TG9jYXRpb24iLCJwYXRocyIsIm1haW4iLCJsYXRsbmdzIiwiYXR0YWNrcyIsInhwUGVyY2VudCIsImV4cGVyaWVuY2UiLCJwcmV2X2xldmVsX3hwIiwibmV4dF9sZXZlbF94cCIsInVuaXF1ZVBva2VkZXhQZXJjZW50IiwidW5pcXVlX3Bva2VkZXhfZW50cmllcyIsInBva2Vtb25JbnZQZXJjZW50IiwibWF4X3Bva2Vtb25fc3RvcmFnZSIsIml0ZW1zSW52UGVyY2VudCIsIml0ZW1fY291bnQiLCJtYXhfaXRlbV9zdG9yYWdlIiwiZ2V0TWFwIiwidGhlbiIsIm1hcCIsInNldFRpbWVvdXQiLCJpbnZhbGlkYXRlU2l6ZSIsImNlbnRlciIsInpvb20iLCJmb3J0IiwiZW5hYmxlZCIsImx1cmVfaW5mbyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaWNvbiIsImljb25VcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJmb2N1cyIsImRyYWdnYWJsZSIsImNvbG9yIiwid2VpZ2h0IiwicG9rZW1vbkRhdGFUYWJsZU9wdGlvbnMiLCJuZXdPcHRpb25zIiwid2l0aE9wdGlvbiIsImV4cEx2bE9wdGlvbnMiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJiYXJDb2xvciIsInNjYWxlQ29sb3IiLCJsaW5lV2lkdGgiLCJsaW5lQ2FwIiwidW5pcXVlUG9rZWRleE9wdGlvbnMiLCJwb2tlbW9uSW52T3B0aW9ucyIsIml0ZW1zSW52T3B0aW9ucyIsIlVzZXJzIiwiZmFjdG9yeSIsImhlYWRlck5hdiIsImdldFByaW1hcnlNZW51Iiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJQcmlvcml0eSIsIkxhYmVsIiwibG9jYWxlQ29tcGFyZSIsInJlZ2lzdGVyUHJpbWFyeU1lbnUiLCJsYWJlbCIsImFjdGl2ZVN0YXRlIiwiU3RhdGUiLCJBY3RpdmVTdGF0ZSIsIkljb24iLCJ1c2VyTGlzdCIsImN1cnJlbnRVc2VyIiwic2V0VXNlcnMiLCJnZXRVc2VycyIsInNldEN1cnJlbnRVc2VyIiwiZ2V0Q3VycmVudFVzZXIiLCJzb2NrZXRGYWN0b3J5Iiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsImlvU29ja2V0IiwiaW8iLCJjb25uZWN0IiwicHJvdG9jb2wiLCJob3N0Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxl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QUFDLEdBQ0EsTUFBQUQsR0FBQWhMLFNBQUFxTCxjQUFBSixFQUFBakwsYUFHQW9ELEVBQUEsU0FBQXpELEdDM0NBLElBQUEsR0FBQWtFLEdBQUEsRUFBQUEsRUFBQStILEVBQUFuUCxPQUFBb0gsSUFDQStILEVBQUEvSCxHQUFBN0QsVUFBQUwsRUFBQUssV0FDQTRMLEVBQUEvSCxHQUFBUixPQUFBMUQsRUFBQTBELE9BR0EsT0FBQXVJLElBRUFHLEVBQUEsV0FDQSxNQUFBSCxJQUVBSSxFQUFBLFNBQUFoTSxHQUNBNkwsRUFBQTdMLEdDWEFpTSxFQUFBLFdBQ0EsSUFBQSxHQUFBcEksR0FBQSxFQUFBQSxFQUFBK0gsRUFBQW5QLE9BQUFvSCxJQUNBLEdBQUErSCxFQUFBL0gsR0FBQTdELFVBQUE2TCxFQUNBLE1BQUFELEdBQUEvSCxFQUdBLFVBRUEsUUFDQWhELElBQUFpTCxFQUNBekwsT0FBQStDLEVBQ0E1RCxJQUFBdU0sRUFDQS9JLFdBQUFnSixFQUNBcE0sV0FBQXFNLEtBR0FyUSxRQUFBQyxPQUFBLDhCQUFBLHFCQUFBK08sUUFBQSxjQUNBLGdCQUNBLFlBQ0EsU0FBQXNCLEVBQUE3UCxHQUNBLEdBQUFDLEdBQUE2UCxPQUFBQyxTQUFBQyxTQUFBMVAsUUFBQSxRQUFBLElBQUEsWUFFQSxPQUFBdVAsSUFBQUksU0FBQUMsR0FBQUMsUUFBQUwsT0FBQUMsU0FBQUssU0FBQSxLQUFBTixPQUFBQyxTQUFBTSxLQUFBLGdCQUFBcFEsS0FBQUEiLCJmaWxlIjoiYW5ndWxhci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgncG9rZXRyYWluZXInLCBbXHJcblx0J3Bva2V0cmFpbmVyLk1vZHVsZS5UZW1wbGF0ZXMnLFxyXG5cclxuXHQvKiogSW50ZXJuYWwgTW9kdWxlcyAqKi9cclxuXHQnUG9rZXRyYWluZXIuTW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlcicsXHJcblxyXG5cdC8qKiBJbnRlcm5hbCBTZXJ2aWNlcyAqKi9cclxuXHQnUG9rZXRyYWluZXIuU2VydmljZS5OYXZpZ2F0aW9uJyxcclxuXHQnUG9rZXRyYWluZXIuU2VydmljZS5Tb2NrZXRFdmVudCcsXHJcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0JyxcclxuXHQnUG9rZXRyYWluZXIuU2VydmljZS5Vc2VyTGlzdCcsXHJcblxyXG5cdC8qKiBTdGF0ZXMvUm91dGVzICoqL1xyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5BYnN0cmFjdHMnLFxyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5TdGF0dXMnLFxyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5Vc2VycycsXHJcblxyXG5cclxuXHQvKiogRXh0ZXJuYWwgTGlicyAqKi9cclxuXHQndWkucm91dGVyJyxcclxuICAgICduZ01hdGVyaWFsJyxcclxuICAgICduZ01lc3NhZ2VzJ1xyXG5cclxuXHQvKiogSW50ZXJuYWwgRGlyZWN0aXZlcyAqKi9cclxuXHRcclxuXSlcclxuXHJcblx0LmNvbmZpZyhmdW5jdGlvbiBwb2tlVHJhaW5lckNvbmZpZygkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciwgJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XHJcblx0XHQvLyRsb2NhdGlvblByb3ZpZGVyXHJcblx0XHQvL1x0Lmhhc2hQcmVmaXgoJyEnKVxyXG5cdFx0Ly9cdC5odG1sNU1vZGUoZmFsc2UpO1xyXG5cclxuXHRcdCR1cmxSb3V0ZXJQcm92aWRlci5ydWxlKGZ1bmN0aW9uICgkaW5qZWN0b3IsICRsb2NhdGlvbikge1xyXG5cdFx0XHR2YXIgcGF0aCA9ICRsb2NhdGlvbi51cmwoKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0Ly8gY2hlY2sgdG8gc2VlIGlmIHRoZSBwYXRoIGFscmVhZHkgaGFzIGEgc2xhc2ggd2hlcmUgaXQgc2hvdWxkIGJlXHJcblx0XHRcdGlmIChwYXRoW3BhdGgubGVuZ3RoIC0gMV0gPT09ICcvJyB8fCBwYXRoLmluZGV4T2YoJy8/JykgPiAtMSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHBhdGguaW5kZXhPZignPycpID4gLTEpIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5yZXBsYWNlKCc/JywgJy8/Jyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBwYXRoICsgJy8nO1xyXG5cdFx0fSlcclxuXHRcdC5vdGhlcndpc2UoJy8nKTtcclxuXHJcblx0XHQkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5zdHJpY3RNb2RlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3JlZCcpO1xyXG5cclxuXHR9KVxyXG5cclxuXHQucnVuKGZ1bmN0aW9uIHBva2VUcmFpbmVyUnVuICgkc3RhdGUsICRyb290U2NvcGUsICRkb2N1bWVudCkge1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJ2ludmVudG9yeTp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpe1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiSW52ZW50b3J5ISEgOkQgXCIpXHJcblx0XHR9KTtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRkb2N1bWVudC5maW5kKCcuc2NyZWVuLWxvYWRpbmctb3ZlcmxheScpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHRcdH0pO1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQkZG9jdW1lbnQuZmluZCgnLnNjcmVlbi1sb2FkaW5nLW92ZXJsYXknKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0XHR9KTtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcclxuXHRcdFx0aWYgKGVycm9yID09PSBcIm9mZmxpbmVcIikge1xyXG5cdFx0XHRcdCRzdGF0ZS5nbyhcInB1YmxpYy51c2Vyc1wiKTtcclxuXHRcdFx0XHQkZG9jdW1lbnQuZmluZCgnLnNjcmVlbi1sb2FkaW5nLW92ZXJsYXknKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pXHJcblxyXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLk1vZHVsZS5Tb2NrZXRFdmVudEVtaXR0ZXInLCBbJ1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0J10pXHJcbiAgICAucnVuKGZ1bmN0aW9uIHJ1blNvY2tldEVtaXR0ZXIoJHJvb3RTY29wZSwgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG5cclxuICAgICAgICBQb2tlU29ja2V0LmZvcndhcmQoU29ja2V0RXZlbnQuVXNlclN0YXR1cyk7XHJcblxyXG4gICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuRGF0YSwgZnVuY3Rpb24gZ2V0U29ja2V0UHVzaChkYXRhKXtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkdvdCBwdXNoIGRhdGE6IFwiLCBkYXRhKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KGRhdGEuZXZlbnQgKyBcIjpcIiArIGRhdGEuYWN0aW9uLCBkYXRhLmRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBCcm9hZGNhc3QgZXZlbnRzIHVzaW5nICRyb290U2NvcGUuJGJyb2FkY2FzdChbbmFtZV0sIFtkYXRhXSk7XHJcbiAgICB9KVxyXG5cclxuOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TdGF0ZS5BYnN0cmFjdHMnLCBbXHJcbiAgICAndWkucm91dGVyJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdwdWJsaWMnLCB7XHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJoZWFkZXJcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy9hYnN0cmFjdHMvaGVhZGVyLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRlbnRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzx1aS12aWV3Lz4nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFNvY2tldEV2ZW50LCBQb2tlU29ja2V0LCBOYXZpZ2F0aW9uLCBVc2VyTGlzdCl7XHJcbiAgICAgICAgJHNjb3BlLm5hdmlnYXRpb24gPSBOYXZpZ2F0aW9uLnByaW1hcnkuZ2V0KCk7XHJcbiAgICAgICAgJHNjb3BlLnN0YXRlID0gJHN0YXRlLmN1cnJlbnQubmFtZTtcclxuICAgICAgICAkc2NvcGUudXNlciA9IFVzZXJMaXN0LmdldEN1cnJlbnQoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlbG9hZF9hcGkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkFjdGlvbiwge3VzZXJuYW1lOiAkc2NvcGUudXNlci51c2VybmFtZSwgYWN0aW9uOiAncmVsb2FkX2FwaSd9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUucmVzZXRfc3RhdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkFjdGlvbiwge3VzZXJuYW1lOiAkc2NvcGUudXNlci51c2VybmFtZSwgYWN0aW9uOiAncmVzZXRfc3RhdHMnfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN0b3BfYm90ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5BY3Rpb24sIHt1c2VybmFtZTogJHNjb3BlLnVzZXIudXNlcm5hbWUsIGFjdGlvbjogJ3N0b3BfYm90J30pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zdGFydF9ib3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkFjdGlvbiwge3VzZXJuYW1lOiAkc2NvcGUudXNlci51c2VybmFtZSwgYWN0aW9uOiAnc3RhcnRfYm90J30pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byBsaXN0ZW4gZm9yIG5ldyBldmVudHNcclxuICAgICAgICAkc2NvcGUuJG9uKFNvY2tldEV2ZW50Ll9wcmVmaXggKyBTb2NrZXRFdmVudC5Vc2VyU3RhdHVzLCBmdW5jdGlvbihldmVudCwgdXNlcikge1xyXG4gICAgICAgICAgICBVc2VyTGlzdC51cGRhdGUodXNlcik7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyID0gVXNlckxpc3QuZ2V0Q3VycmVudCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignY3VycmVudFVzZXJfOmNoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyID0gVXNlckxpc3QuZ2V0Q3VycmVudCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xyXG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUgPSB0b1N0YXRlLm5hbWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciB1c2VyRXZlbnRDYiA9IGZ1bmN0aW9uIHVzZXJFdmVudENiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCAhbWVzc2FnZS5zdWNjZXNzIHx8ICFhbmd1bGFyLmlzQXJyYXkobWVzc2FnZS51c2Vycykpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoU29ja2V0RXZlbnQuVXNlckxpc3QsIHVzZXJFdmVudENiKTtcclxuICAgICAgICAgICAgVXNlckxpc3Quc2V0KG1lc3NhZ2UudXNlcnMpO1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlciA9IFVzZXJMaXN0LmdldEN1cnJlbnQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnN0YXRlICE9PSAncHVibGljLnVzZXJzJykge1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlVzZXJMaXN0LCB1c2VyRXZlbnRDYik7XHJcblxyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuVXNlckxpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlN0YXRlLlN0YXR1cycsIFtcclxuICAgICd1aS5yb3V0ZXInLFxyXG4gICAgJ3VpR21hcGdvb2dsZS1tYXBzJyxcclxuICAgICdjaGFydC5qcycsXHJcbiAgICAnZWFzeXBpZWNoYXJ0JyxcclxuICAgICdkYXRhdGFibGVzJyxcclxuICAgICd1aS1sZWFmbGV0JyxcclxuICAgICduZW1Mb2dnaW5nJyxcclxuXHQneGVkaXRhYmxlJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcikge1xyXG5cclxuICAgICAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgICAgICAvL2tleTogJzxNQVBTIEFQSSBLRVk+JyxcclxuICAgICAgICAgICAgdjogJzMuMjQnLFxyXG4gICAgICAgICAgICBsaWJyYXJpZXM6ICd3ZWF0aGVyLGdlb21ldHJ5LHZpc3VhbGl6YXRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwdWJsaWMuZGFzaGJvYXJkJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvZGFzaGJvYXJkLzp1c2VybmFtZScsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVMb2NhdGlvbkRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uRGF0YUNiID0gZnVuY3Rpb24gbG9jYXRpb25EYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnbG9jYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBsb2NhdGlvbkRhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnbG9jYXRpb24nXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnlEYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZUludmVudG9yeURhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludmVudG9yeURhdGFDYiA9IGZ1bmN0aW9uIGludmVudG9yeURhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdpbnZlbnRvcnknKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIGludmVudG9yeURhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnaW52ZW50b3J5J11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQbGF5ZXJEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJEYXRhQ2IgPSBmdW5jdGlvbiBwbGF5ZXJEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAncGxheWVyJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBwbGF5ZXJEYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3BsYXllciddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHBsYXllclN0YXRzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQbGF5ZXJTdGF0c0RhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllclN0YXRzRGF0YUNiID0gZnVuY3Rpb24gcGxheWVyU3RhdHNEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAncGxheWVyX3N0YXRzJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBwbGF5ZXJTdGF0c0RhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsncGxheWVyX3N0YXRzJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcG9rZW1vbkRhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlUG9rZW1vbkRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBva2Vtb25EYXRhQ2IgPSBmdW5jdGlvbiBwb2tlbW9uRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ3Bva2Vtb24nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIHBva2Vtb25EYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3Bva2Vtb24nXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBmb3J0c0RhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlRm9ydHNEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3J0c0RhdGFDYiA9IGZ1bmN0aW9uIGZvcnRzRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ2ZvcnRzJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBmb3J0c0RhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnZm9ydHMnXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBhdHRhY2tzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVBdHRhY2tzRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0YWNrc0RhdGFDYiA9IGZ1bmN0aW9uIGF0dGFja3NEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnYXR0YWNrcycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgYXR0YWNrc0RhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnYXR0YWNrcyddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGFzaGJvYXJkQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGVzL2Rhc2hib2FyZC9kYXNoYm9hcmQudHBsLmh0bWwnXHJcbiAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KVxyXG5cclxuICAgIC5ydW4oZnVuY3Rpb24gKE5hdmlnYXRpb24pIHtcclxuICAgICAgICBOYXZpZ2F0aW9uLnByaW1hcnkucmVnaXN0ZXIoXCJVc2Vyc1wiLCBcInB1YmxpYy51c2Vyc1wiLCAzMCwgJ21kIG1kLWV2ZW50LWF2YWlsYWJsZScsICdwdWJsaWMudXNlcnMnKTtcclxuICAgIH0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCAkbWRUb2FzdCwgJHEsIFBva2VTb2NrZXQsIGxlYWZsZXREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJMaXN0LCBsb2NhdGlvbkRhdGEsIGludmVudG9yeURhdGEsIHBsYXllckRhdGEsIHBsYXllclN0YXRzRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2tlbW9uRGF0YSwgZm9ydHNEYXRhLCBhdHRhY2tzRGF0YSwgU29ja2V0RXZlbnQsIERUT3B0aW9uc0J1aWxkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGFibGVPcHRpb25zLCBlZGl0YWJsZVRoZW1lcykge1xyXG4gICAgICAgIFVzZXJMaXN0LnNldEN1cnJlbnQoJHN0YXRlUGFyYW1zLnVzZXJuYW1lKTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoXCJjdXJyZW50VXNlcl86Y2hhbmdlZFwiKTtcclxuXHJcbiAgICAgICAgZWRpdGFibGVUaGVtZXMuYnMzLmlucHV0Q2xhc3MgPSAnaW5wdXQtc20nO1xyXG4gICAgICAgIGVkaXRhYmxlVGhlbWVzLmJzMy5idXR0b25zQ2xhc3MgPSAnYnRuLXNtJztcclxuICAgICAgICBlZGl0YWJsZU9wdGlvbnMudGhlbWUgPSAnYnMzJztcclxuXHJcbiAgICAgICAgdmFyIHVzZXJFdmVudFVwZGF0ZSA9IGZ1bmN0aW9uIHVzZXJFdmVudFVwZGF0ZShldmVudCwgbWVzc2FnZSkge1xyXG4gICAgICAgICAgICBpZiAoJHN0YXRlUGFyYW1zLnVzZXJuYW1lID09IG1lc3NhZ2UudXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXR1cyA9PSAnb2ZmbGluZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3B1YmxpYy51c2VycycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUuJG9uKFNvY2tldEV2ZW50Ll9wcmVmaXggKyBTb2NrZXRFdmVudC5Vc2VyU3RhdHVzLCB1c2VyRXZlbnRVcGRhdGUpO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKFwiJGRlc3Ryb3lcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkxlYXZlLCB7cm9vbTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSm9pbiBzcGVjaWZpYyB1c2VyIHJvb21cclxuICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuSm9pbiwge3Jvb206ICRzdGF0ZVBhcmFtcy51c2VybmFtZX0pO1xyXG5cclxuICAgICAgICAvKiogVFJBTlNGRVIgKiovXHJcbiAgICAgICAgdmFyIHRyYW5zZmVyX3BfaWQ7XHJcbiAgICAgICAgdmFyIHRyYW5zZmVyQ2IgPSBmdW5jdGlvbiB0cmFuc2ZlckNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmV2b2x2ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPSRzY29wZS5wb2tlbW9uLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBva2Vtb25baV0uaWQgPT0gdHJhbnNmZXJfcF9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9rZW1vbi5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYW5zZmVyX3BfaWQgPSAwO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKCdyZWxlYXNlX3Bva2Vtb25fYnlfaWQnLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS50cmFuc2ZlciA9IGZ1bmN0aW9uKHBfaWQpIHtcclxuICAgICAgICAgICAgdHJhbnNmZXJfcF9pZCA9IHBfaWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKCdyZWxlYXNlX3Bva2Vtb25fYnlfaWQnLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkFjdGlvbiwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIGFjdGlvbjogJ3JlbGVhc2VfcG9rZW1vbl9ieV9pZCcsIHBhcmFtczogW3BfaWRdfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqIEVWT0xWRSAqKi9cclxuICAgICAgICB2YXIgZXZvbHZlQ2IgPSBmdW5jdGlvbiBldm9sdmVDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2V2b2x2ZV9wb2tlbW9uX2J5X2lkJywgZXZvbHZlQ2IpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLmV2b2x2ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5ldm9sdmUgPSBmdW5jdGlvbihwX2lkKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKCdldm9sdmVfcG9rZW1vbl9ieV9pZCcsIGV2b2x2ZUNiKTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkFjdGlvbiwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIGFjdGlvbjogJ2V2b2x2ZV9wb2tlbW9uX2J5X2lkJywgcGFyYW1zOiBbcF9pZF19KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogU05JUEUgKiovXHJcbiAgICAgICAgdmFyIHNuaXBlZENiID0gZnVuY3Rpb24gc25pcGVkQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAvL21lc3NhZ2Uuc3VjY2VzcztcclxuICAgICAgICAgICAgJHNjb3BlLnNuaXBlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ3NuaXBlX3Bva2Vtb24nLCBzbmlwZWRDYik7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudChtZXNzYWdlLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgY2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUuc25pcGVfY29vcmRzID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnNuaXBlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnNuaXBlX2F1dG8gPSBmYWxzZTsgLy8gbm90IGltcGxlbWVudGVkXHJcbiAgICAgICAgJHNjb3BlLnNuaXBlID0gZnVuY3Rpb24oc25pcGVfY29vcmRzKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zbmlwZV9kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQub24oJ3NuaXBlX3Bva2Vtb24nLCBzbmlwZWRDYik7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5BY3Rpb24sIHt1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLCBhY3Rpb246ICdzbmlwZV9wb2tlbW9uJywgbGF0bG5nOiBzbmlwZV9jb29yZHN9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogVXBncmFkZSBwb2tlbW9uICoqL1xyXG4gICAgICAgIHZhciB1cGdyYWRlX3BrbTtcclxuICAgICAgICB2YXIgdXBncmFkZUNiID0gZnVuY3Rpb24gdXBncmFkZUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVwZ3JhZGVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcigndXBncmFkZV9wb2tlbW9uX2J5X2lkJywgdXBncmFkZUNiKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmludmVudG9yeS5wb2tlbW9uX2NhbmR5W3VwZ3JhZGVfcGttLmZhbWlseV9pZF0gLT0gdXBncmFkZV9wa20uY2FuZHlfbmVlZGVkX3RvX3VwZ3JhZGU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGxheWVyLmN1cnJlbmNpZXNbMV0uYW1vdW50IC09IHVwZ3JhZGVfcGttLmR1c3RfbmVlZGVkX3RvX3VwZ3JhZGU7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucG9rZW1vbltpXS5pZCA9PSBtZXNzYWdlLnVwZ3JhZGVkX3Bva2Vtb24uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb25baV0gPSBtZXNzYWdlLnVwZ3JhZGVkX3Bva2Vtb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGdyYWRlX3BrbSA9IHt9O1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnVwZ3JhZGVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUudXBncmFkZSA9IGZ1bmN0aW9uKHBrbSkge1xyXG4gICAgICAgICAgICB1cGdyYWRlX3BrbSA9IHBrbTtcclxuICAgICAgICAgICAgJHNjb3BlLnVwZ3JhZGVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKCd1cGdyYWRlX3Bva2Vtb25fYnlfaWQnLCB1cGdyYWRlQ2IpO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuQWN0aW9uLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgYWN0aW9uOiAndXBncmFkZV9wb2tlbW9uX2J5X2lkJywgcGFyYW1zOiBbcGttLmlkXX0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBOaWNrbmFtZSAqKi9cclxuICAgICAgICAkc2NvcGUubmlja19jaGFuZ2VfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUubmlja19jaGFuZ2UgPSBmdW5jdGlvbihwX2lkLCBuaWNrbmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmlja19jaGFuZ2VDYiA9IGZ1bmN0aW9uIG5pY2tfY2hhbmdlQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5pY2tfY2hhbmdlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKCduaWNrbmFtZV9wb2tlbW9uX2J5X2lkJywgbmlja19jaGFuZ2VDYik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgdXN1YWxseSBub3QgbmVlZGVkLCBidXQgaW4gY2FzZSB0aGUgcG9rZW1vbiBsaXN0IGlzIG1lc3NlZCB3ZSBkbyBpdCBhbnl3YXkgdG8gYmUgc3VyZVxyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0kc2NvcGUucG9rZW1vbi5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucG9rZW1vbltpXS5pZCA9PSBwX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9rZW1vbltpXS5uYW1lID0gbmlja25hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm5pY2tfY2hhbmdlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbignbmlja25hbWVfcG9rZW1vbl9ieV9pZCcsIG5pY2tfY2hhbmdlQ2IpO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuQWN0aW9uLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgYWN0aW9uOiAnbmlja25hbWVfcG9rZW1vbl9ieV9pZCcsIHBhcmFtczogW3BfaWQsIG5pY2tuYW1lXX0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLyoqIEZhdm9yaXRlICoqL1xyXG4gICAgICAgIHZhciBzZXRfZmF2b3JpdGVfcF9pZDtcclxuICAgICAgICB2YXIgc2V0X2Zhdm9yaXRlX2Zhdm9yaXRlO1xyXG4gICAgICAgIHZhciBzZXRfZmF2b3JpdGVDYiA9IGZ1bmN0aW9uIHNldF9mYXZvcml0ZUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNldF9mYXZvcml0ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKCdzZXRfZmF2b3JpdGVfcG9rZW1vbl9ieV9pZCcsIHNldF9mYXZvcml0ZUNiKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPSRzY29wZS5wb2tlbW9uLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBva2Vtb25baV0uaWQgPT0gc2V0X2Zhdm9yaXRlX3BfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb25baV0uaXNfZmF2b3JpdGUgPSBzZXRfZmF2b3JpdGVfZmF2b3JpdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRfZmF2b3JpdGVfcF9pZCA9IDA7XHJcbiAgICAgICAgICAgIHNldF9mYXZvcml0ZV9mYXZvcml0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnNldF9mYXZvcml0ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5zZXRfZmF2b3JpdGUgPSBmdW5jdGlvbihwX2lkLCBmYXZvcml0ZSkge1xyXG4gICAgICAgICAgICBzZXRfZmF2b3JpdGVfcF9pZCA9IHBfaWQ7XHJcbiAgICAgICAgICAgIHNldF9mYXZvcml0ZV9mYXZvcml0ZSA9IGZhdm9yaXRlO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2V0X2Zhdm9yaXRlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbignc2V0X2Zhdm9yaXRlX3Bva2Vtb25fYnlfaWQnLCBzZXRfZmF2b3JpdGVDYik7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5BY3Rpb24sIHt1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLCBhY3Rpb246ICdzZXRfZmF2b3JpdGVfcG9rZW1vbl9ieV9pZCcsIHBhcmFtczogW3BfaWQsIGZhdm9yaXRlXX0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLiRvbignaW52ZW50b3J5OnVwZGF0ZWQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLmludmVudG9yeSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwbGF5ZXJfc3RhdHM6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wbGF5ZXJTdGF0cyA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwbGF5ZXI6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wbGF5ZXIgPSBkYXRhO1xyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgLy8gdGhpcyBtYWtlcyB0aGUgcG9rZW1vbiB0YWJsZSBnbyBjcmF6eSBmb3IgYSBiaXRcclxuICAgICAgICAvLyB3ZSBpbnNlcnQgLyBkZWxldGUgYmFzZWQgb24gb3RoZXIgZXZlbnMsIHNvIGl0IF9zaG91bGRfIGJlIGFjY3VyYXRlIGFueXdheVxyXG4gICAgICAgIC8qJHNjb3BlLiRvbignY2F1Z2h0X3Bva2Vtb246dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wb2tlbW9uID0gZGF0YTtcclxuIMKgIMKgIMKgIMKgfSk7Ki9cclxuIFxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246Y2F1Z2h0JywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb24gPSBkYXRhO1xyXG4gICAgICAgICAgICAvL3Bva2Vtb24uY3JlYXRpb25fdGltZV9tcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUucG9rZW1vbi5wdXNoKHBva2Vtb24pO1xyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0NhdWdodDogJyArIHBva2Vtb24ubmFtZSArICcgKElWOiAnICsgTWF0aC5mbG9vcihwb2tlbW9uLml2KSArICcgfCBDUDogJyArIHBva2Vtb24uY3AgKyAnKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgY2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwb2tlbW9uOnJlbGVhc2VkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb24gPSBkYXRhO1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHBva2Vtb24uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9rZW1vbi5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1JlbGVhc2VkOiAnICsgcG9rZW1vbi5uYW1lICsgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb24uaXYpICsgJyB8IENQOiAnICsgcG9rZW1vbi5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246ZXZvbHZlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2tlbW9uX29sZCA9IGRhdGEub2xkO1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbl9uZXcgPSBkYXRhLm5ldztcclxuICAgICAgICAgICAgZm9yKHZhciBpPSRzY29wZS5wb2tlbW9uLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucG9rZW1vbltpXS5pZCA9PSBwb2tlbW9uX29sZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wb2tlbW9uLnB1c2gocG9rZW1vbl9uZXcpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0V2b2x2ZWQ6ICcgKyBwb2tlbW9uX29sZC5uYW1lICsgJyB0byAnICsgcG9rZW1vbl9uZXcubmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKElWOiAnICsgTWF0aC5mbG9vcihwb2tlbW9uX25ldy5pdikgKyAnIHwgQ1A6ICcgKyBwb2tlbW9uX25ldy5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2ZvcnQ6c3B1bicsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRm9ydCBzcHVuLCByZXdhcmQ6ICcgKyBkYXRhLnJld2FyZClcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcbiBcclxuICAgICAgICB2YXIgcG9zaXRpb25VcGRhdGVzID0gMDtcclxuIMKgIMKgIMKgIMKgJHNjb3BlLiRvbigncG9zaXRpb246dXBkYXRlJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgcG9zaXRpb25VcGRhdGVzKys7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoGlmIChwb3NpdGlvblVwZGF0ZXMgJSAxID09IDApIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLm1hcmtlcnMuYm90LmxhdCA9IGRhdGFbMF07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5tYXJrZXJzLmJvdC5sbmcgPSBkYXRhWzFdO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqB2YXIgbmV3TG9jYXRpb24gPSB7bGF0OiBkYXRhWzBdLCBsbmc6IGRhdGFbMV19O1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUucGF0aHMubWFpbi5sYXRsbmdzLnB1c2gobmV3TG9jYXRpb24pO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqB9XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUucGxheWVyID0gcGxheWVyRGF0YTtcclxuICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMgPSBwbGF5ZXJTdGF0c0RhdGE7XHJcbiAgICAgICAgJHNjb3BlLmludmVudG9yeSA9IGludmVudG9yeURhdGE7XHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb24gPSBwb2tlbW9uRGF0YTtcclxuICAgICAgICAkc2NvcGUuYXR0YWNrcyA9IGF0dGFja3NEYXRhO1xyXG5cclxuICAgICAgICB2YXIgdXBkYXRlUGVyY2VudGFnZXMgPSBmdW5jdGlvbiB1cGRhdGVQZXJjZW50YWdlcygpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnhwUGVyY2VudCA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLnBsYXllclN0YXRzLmV4cGVyaWVuY2UgLSAkc2NvcGUucGxheWVyU3RhdHMucHJldl9sZXZlbF94cClcclxuICAgICAgICAgICAgICAgIC8oJHNjb3BlLnBsYXllclN0YXRzLm5leHRfbGV2ZWxfeHAgLSAkc2NvcGUucGxheWVyU3RhdHMucHJldl9sZXZlbF94cClcclxuICAgICAgICAgICAgICAgICoxMDBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnVuaXF1ZVBva2VkZXhQZXJjZW50ID0gTWF0aC5mbG9vcigkc2NvcGUucGxheWVyU3RhdHMudW5pcXVlX3Bva2VkZXhfZW50cmllcyAvIDE1MSAqIDEwMCk7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cy5wb2tlbW9uSW52UGVyY2VudCA9IE1hdGguZmxvb3IoJHNjb3BlLnBva2Vtb24ubGVuZ3RoIC8gJHNjb3BlLnBsYXllci5tYXhfcG9rZW1vbl9zdG9yYWdlICAqIDEwMCk7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cy5pdGVtc0ludlBlcmNlbnQgPSBNYXRoLmZsb29yKCRzY29wZS5pbnZlbnRvcnkuaXRlbV9jb3VudCAvICRzY29wZS5wbGF5ZXIubWF4X2l0ZW1fc3RvcmFnZSAgKiAxMDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuXHJcbiAgICAgICAgLy8gdmVyeSBkaXJ0eSBmaXggdG8gbWFrZSB0aGUgbGVhZmxldCBtYXAgbG9hZCBmdWxsc2NyZWVuXHJcbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IG1hcC5pbnZhbGlkYXRlU2l6ZSgpOyB9LCAzMDAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLm1hcCA9IHsgY2VudGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXQ6IGxvY2F0aW9uRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxuZzogbG9jYXRpb25EYXRhWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbWFya2VycyA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ydHNEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3J0ID0gZm9ydHNEYXRhW2ldO1xyXG4gICAgICAgICAgICBpZiAoZm9ydC50eXBlID09IDEgJiYgKGZvcnQuZW5hYmxlZCB8fCBmb3J0Lmx1cmVfaW5mbykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtlcnNbJ2ZvcnRfJyArIGldID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdDogZm9ydC5sYXRpdHVkZSxcclxuICAgICAgICAgICAgICAgICAgICBsbmc6IGZvcnQubG9uZ2l0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGZvcnQubGF0aXR1ZGUgKyAnLCAnICsgZm9ydC5sb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsOiAnYXNzZXRzL2ltYWdlcy9wc3RvcC5wbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzMxLCAzMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25BbmNob3I6IFsxNSwgMjldXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gR1lNLCB3ZSBjb3VsZCBkaXNwbGF5IHRoZW0gYXN3ZWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbWFya2Vyc1snYm90J10gPSB7XHJcbiAgICAgICAgICAgIGxhdDogbG9jYXRpb25EYXRhWzBdLFxyXG4gICAgICAgICAgICBsbmc6IGxvY2F0aW9uRGF0YVsxXSxcclxuICAgICAgICAgICAgbWVzc2FnZTogJHNjb3BlLnBsYXllci51c2VybmFtZSxcclxuICAgICAgICAgICAgZm9jdXM6IHRydWUsXHJcbiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5tYXJrZXJzID0gbWFya2VycztcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUucGF0aHMgPSB7XHJcbiAgICAgICAgICAgIG1haW46IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI0Y0NDMzNicsXHJcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IDQsXHJcbiAgICAgICAgICAgICAgICBsYXRsbmdzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgeyBsYXQ6IGxvY2F0aW9uRGF0YVswXSwgbG5nOiBsb2NhdGlvbkRhdGFbMV0gfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUucG9rZW1vbkRhdGFUYWJsZU9wdGlvbnMgPSBEVE9wdGlvbnNCdWlsZGVyLm5ld09wdGlvbnMoKVxyXG4gICAgICAgICAgICAud2l0aE9wdGlvbignb3JkZXInLCBbWyAwLCBcImRlc2NcIiBdXSlcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ3N0YXRlU2F2ZScsIHRydWUpO1xyXG4gICAgICAgICAgICAvKi53aXRoT3B0aW9uKCdzY3JvbGxZJywgJzc1dmgnKVxyXG4gICAgICAgICAgICAud2l0aE9wdGlvbignc2Nyb2xsWCcsIHRydWUpO1xyXG4gICAgICAgICAgICAud2l0aE9wdGlvbigncGFnaW5nJywgdHJ1ZSkqL1xyXG5cclxuICAgICAgICAkc2NvcGUuZXhwTHZsT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjMDNBOUY0JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnVuaXF1ZVBva2VkZXhPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyNGRkMxMDcnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUucG9rZW1vbkludk9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGU6e1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTAwMCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJDb2xvcjonIzAwOTY4OCcsXHJcbiAgICAgICAgICAgIHNjYWxlQ29sb3I6ZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDoxMCxcclxuICAgICAgICAgICAgbGluZUNhcDonY2lyY2xlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5pdGVtc0ludk9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGU6e1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTAwMCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJDb2xvcjonI0Y0NDMzNicsXHJcbiAgICAgICAgICAgIHNjYWxlQ29sb3I6ZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDoxMCxcclxuICAgICAgICAgICAgbGluZUNhcDonY2lyY2xlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSlcclxuO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU3RhdGUuVXNlcnMnLCBbXHJcbiAgICAndWkucm91dGVyJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3B1YmxpYy51c2VycycsIHtcclxuICAgICAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIFVzZXJzOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgJ1VzZXJMaXN0JywgZnVuY3Rpb24gcmVzb2x2ZVVzZXJzKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50LCBVc2VyTGlzdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlckV2ZW50Q2IgPSBmdW5jdGlvbiB1c2VyRXZlbnRDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgIW1lc3NhZ2Uuc3VjY2VzcyB8fCAhYW5ndWxhci5pc0FycmF5KG1lc3NhZ2UudXNlcnMpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LlVzZXJMaXN0LCB1c2VyRXZlbnRDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJMaXN0LnNldChtZXNzYWdlLnVzZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5Vc2VyTGlzdCwgdXNlckV2ZW50Q2IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBFbWl0IHRoZSBldmVudCB0byBvdXIgc29ja2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgbGlzdGVuaW5nIGZvciBpdC5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuVXNlckxpc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGVzL3VzZXJzL3VzZXJzLnRwbC5odG1sJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfSlcclxuXHJcbiAgICAucnVuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgTmF2aWdhdGlvbi5wcmltYXJ5LnJlZ2lzdGVyKFwiVXNlcnNcIiwgXCJwdWJsaWMudXNlcnNcIiwgMzAsICdtZCBtZC1ldmVudC1hdmFpbGFibGUnLCAncHVibGljLnVzZXJzJyk7XHJcbiAgICB9KVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdVc2Vyc0NvbnRyb2xsZXInLCBmdW5jdGlvbiBVc2Vyc0NvbnRyb2xsZXIoJHNjb3BlLCBVc2VyTGlzdCwgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpIHtcclxuICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIGFueSBkYXRhIGZyb20gdGhlIGdsb2JhbCBzY29wZSBoZXJlLi4uIHlldD9cclxuICAgICAgICAvL1Bva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5Kb2luLCB7cm9vbTogJ2dsb2JhbCd9KTtcclxuICAgICAgICAkc2NvcGUudXNlcnMgPSBVc2VyTGlzdC5nZXQoKTtcclxuICAgICAgICBVc2VyTGlzdC5zZXRDdXJyZW50KCcnKTtcclxuXHJcbiAgICAgICAgdmFyIHVzZXJFdmVudFVwZGF0ZSA9IGZ1bmN0aW9uIHVzZXJFdmVudFVwZGF0ZShldmVudCwgdXNlcikge1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlcnMgPSBVc2VyTGlzdC51cGRhdGUodXNlcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIGxpc3RlbiBmb3IgbmV3IGV2ZW50c1xyXG4gICAgICAgICRzY29wZS4kb24oU29ja2V0RXZlbnQuX3ByZWZpeCArIFNvY2tldEV2ZW50LlVzZXJTdGF0dXMsIHVzZXJFdmVudFVwZGF0ZSk7XHJcbiAgICB9KVxyXG47XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TZXJ2aWNlLk5hdmlnYXRpb24nLCBbXSlcclxuXHJcbiAgICAuZmFjdG9yeSgnTmF2aWdhdGlvbicsIGZ1bmN0aW9uIE5hdmlnYXRpb25GYWN0b3J5KCkge1xyXG4gICAgICAgIHZhciBoZWFkZXJOYXYgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIGdldFByaW1hcnlNZW51ID0gZnVuY3Rpb24gZ2V0UHJpbWFyeU1lbnUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJOYXYuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByaW9yaXR5ID0gYS5Qcmlvcml0eSAtIGIuUHJpb3JpdHk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuTGFiZWwubG9jYWxlQ29tcGFyZShiLkxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJpb3JpdHk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHJlZ2lzdGVyUHJpbWFyeU1lbnUgPSBmdW5jdGlvbiByZWdpc3RlclByaW1hcnlNZW51KGxhYmVsLCBzdGF0ZSwgcHJpb3JpdHksIGljb24sIGFjdGl2ZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmKCB0eXBlb2YoaWNvbikgIT09IFwic3RyaW5nXCIpe1xyXG4gICAgICAgICAgICAgICAgaWNvbiA9IFwibWQgbWQtY2hldnJvbi1yaWdodFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCB0eXBlb2YoYWN0aXZlU3RhdGUpICE9PSBcInN0cmluZ1wiKXtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHByaW9yaXR5KSAhPT0gXCJudW1iZXJcIiB8fCBwcmlvcml0eSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHByaW9yaXR5ID0gMTA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGhlYWRlck5hdi5wdXNoKHtcclxuICAgICAgICAgICAgICAgIExhYmVsOiBsYWJlbCxcclxuICAgICAgICAgICAgICAgIFN0YXRlOiBzdGF0ZSxcclxuICAgICAgICAgICAgICAgIEFjdGl2ZVN0YXRlOiBhY3RpdmVTdGF0ZSxcclxuICAgICAgICAgICAgICAgIFByaW9yaXR5OiBwcmlvcml0eSxcclxuICAgICAgICAgICAgICAgIEljb246IGljb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJpbWFyeToge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBnZXRQcmltYXJ5TWVudSxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlclByaW1hcnlNZW51XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0RXZlbnQnLCBbXSlcclxuICAgIC5mYWN0b3J5KCdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBfcHJlZml4OiBcInNvY2tldDpcIixcclxuICAgICAgICAgICAgVXNlckxpc3Q6ICd1c2VycycsXHJcbiAgICAgICAgICAgIFVzZXJTdGF0dXM6ICd1c2VyX3N0YXR1cycsXHJcbiAgICAgICAgICAgIFJlcXVlc3Q6ICdwdWxsJyxcclxuICAgICAgICAgICAgRGF0YTogJ3B1c2gnLFxyXG4gICAgICAgICAgICBKb2luOiAnam9pbicsXHJcbiAgICAgICAgICAgIExlYXZlOiAnbGVhdmUnLFxyXG4gICAgICAgICAgICBBY3Rpb246ICdhY3Rpb24nXHJcbiAgICAgICAgfVxyXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlNlcnZpY2UuVXNlckxpc3QnLCBbXSlcclxuXHJcbiAgICAuZmFjdG9yeSgnVXNlckxpc3QnLCBmdW5jdGlvbiBVc2VyTGlzdEZhY3RvcnkoKSB7XHJcbiAgICAgICAgdmFyIHVzZXJMaXN0ID0gW107XHJcbiAgICAgICAgdmFyIGN1cnJlbnRVc2VyID0gJyc7XHJcblxyXG4gICAgICAgIHZhciBzZXRVc2VycyA9IGZ1bmN0aW9uIHNldFVzZXJzKHVzZXJzKSB7XHJcbiAgICAgICAgICAgIC8vIHNob3cgYWxsIHVzZXJzIHRvIHVua25vd24gc3RhdGUgdW50aWwgd2UgcmVjZWl2ZSBhIHByb3BlciBzdGF0ZVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB1c2Vyc1tpXS5zdGF0dXMgPSAndW5rbm93bic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXNlckxpc3QgPSB1c2Vycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYS51c2VybmFtZS5sb2NhbGVDb21wYXJlKGIudXNlcm5hbWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB1c2VyRXZlbnRVcGRhdGUgPSBmdW5jdGlvbiB1c2VyRXZlbnRVcGRhdGUodXNlcikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckxpc3RbaV0udXNlcm5hbWUgPT0gdXNlci51c2VybmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJMaXN0W2ldLnN0YXR1cyA9IHVzZXIuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyTGlzdDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBnZXRVc2VycyA9IGZ1bmN0aW9uIGdldFVzZXJzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlckxpc3Q7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbiBzZXRDdXJyZW50VXNlcih1c2VybmFtZSkge1xyXG4gICAgICAgICAgICBjdXJyZW50VXNlciA9IHVzZXJuYW1lO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGdldEN1cnJlbnRVc2VyID0gZnVuY3Rpb24gc2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXNlckxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyTGlzdFtpXS51c2VybmFtZSA9PSBjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyTGlzdFtpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2V0OiBzZXRVc2VycyxcclxuICAgICAgICAgICAgdXBkYXRlOiB1c2VyRXZlbnRVcGRhdGUsXHJcbiAgICAgICAgICAgIGdldDogZ2V0VXNlcnMsXHJcbiAgICAgICAgICAgIHNldEN1cnJlbnQ6IHNldEN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBnZXRDdXJyZW50OiBnZXRDdXJyZW50VXNlclxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
