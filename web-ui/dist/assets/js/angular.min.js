angular.module("poketrainer",["poketrainer.Module.Templates","Poketrainer.Module.SocketEventEmitter","Poketrainer.Service.Navigation","Poketrainer.Service.SocketEvent","Poketrainer.Service.Socket","Poketrainer.Service.UserList","Poketrainer.State.Abstracts","Poketrainer.State.Status","Poketrainer.State.Users","ui.router","ngMaterial","ngMessages"]).config(["$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider","$mdThemingProvider",function(e,t,r,n){e.rule(function(e,t){var r=t.url().toLowerCase();if(!("/"===r[r.length-1]||r.indexOf("/?")>-1))return r.indexOf("?")>-1?r.replace("?","/?"):r+"/"}).otherwise("/"),r.strictMode(!1),n.theme("default").primaryPalette("blue").accentPalette("red")}]).run(["$state","$rootScope","$document",function(e,t,r){t.$on("inventory:updated",function(e,t){}),t.$on("$stateChangeStart",function(){r.find(".screen-loading-overlay").removeClass("hidden")}),t.$on("$stateChangeSuccess",function(){r.find(".screen-loading-overlay").addClass("hidden")}),t.$on("$stateChangeError",function(t,n,o,a,s,i){"offline"===i&&(e.go("public.users"),r.find(".screen-loading-overlay").removeClass("hidden"))})}]),angular.module("Poketrainer.Module.SocketEventEmitter",["Poketrainer.Service.Socket"]).run(["$rootScope","PokeSocket","SocketEvent",function(e,t,r){t.forward(r.UserStatus),t.on(r.Data,function(t){e.$broadcast(t.event+":"+t.action,t.data)})}]),angular.module("Poketrainer.State.Abstracts",["ui.router"]).config(["$stateProvider",function(e){e.state("public",{"abstract":!0,views:{header:{templateUrl:"states/abstracts/header.tpl.html",controller:"HeaderController"},content:{template:"<ui-view/>"}}})}]).controller("HeaderController",["$rootScope","$scope","$state","$stateParams","SocketEvent","PokeSocket","Navigation","UserList",function(e,t,r,n,o,a,s,i){t.navigation=s.primary.get(),t.state=r.current.name,t.user=i.getCurrent(),t.reload_api=function(){a.emit(o.ReloadAPI,{username:t.user.username})},t.reset_stats=function(){a.emit(o.ResetStats,{username:t.user.username})},t.stop_bot=function(){a.emit(o.Stop,{username:t.user.username})},t.start_bot=function(){a.emit(o.Start,{username:t.user.username})},t.$on(o._prefix+o.UserStatus,function(e,r){i.update(r),t.user=i.getCurrent()}),e.$on("currentUser_:changed",function(){t.user=i.getCurrent()}),e.$on("$stateChangeSuccess",function(e,r,n,o,a){t.state=r.name});var u=function l(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(a.removeListener(o.UserList,l),i.set(e.users),t.user=i.getCurrent())};"public.users"!==t.state&&(a.on(o.UserList,u),a.emit(o.UserList))}]),angular.module("Poketrainer.State.Status",["ui.router","uiGmapgoogle-maps","chart.js","easypiechart","datatables","ui-leaflet","nemLogging"]).config(["$stateProvider","uiGmapGoogleMapApiProvider",function(e,t){t.configure({v:"3.24",libraries:"weather,geometry,visualization"}),e.state("public.dashboard",{url:"/dashboard/:username",resolve:{locationData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"location"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["location"]}),o.promise}],inventoryData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"inventory"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["inventory"]}),o.promise}],playerData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["player"]}),o.promise}],playerStatsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player_stats"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["player_stats"]}),o.promise}],pokemonData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"pokemon"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["pokemon"]}),o.promise}],fortsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"forts"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["forts"]}),o.promise}],attacksData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"attacks"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["attacks"]}),o.promise}]},controller:"DashboardController",templateUrl:"states/dashboard/dashboard.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("DashboardController",["$rootScope","$scope","$stateParams","$mdToast","PokeSocket","leafletData","UserList","locationData","inventoryData","playerData","playerStatsData","pokemonData","fortsData","attacksData","SocketEvent","DTOptionsBuilder",function(e,t,r,n,o,a,s,i,u,l,c,p,d,m,f,v){s.setCurrent(r.username),e.$broadcast("currentUser_:changed");var g=function(e,t){r.username==t.username&&"offline"==t.status&&$state.go("public.users")};t.$on(f._prefix+f.UserStatus,g),t.$on("$destroy",function(){o.emit(f.Leave,{room:r.username})}),o.emit(f.Join,{room:r.username});var k,S=function U(e){if(t.evolve_disabled=!1,t.transfer_disabled=!1,e.success)for(var r=t.pokemon.length-1;r>=0;r--)t.pokemon[r].id==k&&t.pokemon.splice(r,1);k=0,o.removeListener(f.Transfer,U),n.show(n.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.transfer_disabled=!1,t.transfer=function(e){k=e,t.evolve_disabled=!0,t.transfer_disabled=!0,o.on(f.Transfer,S),o.emit(f.Transfer,{username:r.username,p_id:e})};var y=function w(e){t.evolve_disabled=!1,t.transfer_disabled=!1,o.removeListener(f.Evolve,w),n.show(n.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.evolve_disabled=!1,t.evolve=function(e){t.evolve_disabled=!0,t.transfer_disabled=!0,o.on(f.Evolve,y),o.emit(f.Evolve,{username:r.username,p_id:e})};var h=function D(e){t.snipe_disabled=!1,o.removeListener(f.Snipe,D),n.show(n.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.snipe_coords="",t.snipe_disabled=!1,t.snipe_auto=!1,t.snipe=function(e){t.snipe_disabled=!0,o.on(f.Snipe,h),o.emit(f.Snipe,{username:r.username,latlng:e})},t.$on("inventory:updated",function(e,r){t.inventory=r,P()}),t.$on("player_stats:updated",function(e,r){t.playerStats=r,P()}),t.$on("player:updated",function(e,r){t.player=r,P()}),t.$on("pokemon:caught",function(e,r){var o=r;t.pokemon.push(o),P(),n.show(n.simple().textContent("Caught: "+o.name+" (IV: "+Math.floor(o.iv)+" | CP: "+o.cp+")").position("top center").hideDelay(3e3))}),t.$on("pokemon:released",function(e,r){for(var o=r,a=t.pokemon.length-1;a>=0;a--)t.pokemon[a].id==o.id&&t.pokemon.splice(a,1);P(),n.show(n.simple().textContent("Released: "+o.name+" (IV: "+Math.floor(o.iv)+" | CP: "+o.cp+")").position("top center").hideDelay(3e3))}),t.$on("pokemon:evolved",function(e,r){for(var o=r.old,a=r["new"],s=t.pokemon.length-1;s>=0;s--)t.pokemon[s].id==o.id&&t.pokemon.splice(s,1);t.pokemon.push(a),n.show(n.simple().textContent("Evolved: "+o.name+" to "+a.name+" (IV: "+Math.floor(a.iv)+" | CP: "+a.cp+")").position("top center").hideDelay(3e3))}),t.$on("fort:spun",function(e,t){n.show(n.simple().textContent("Fort spun, reward: "+t.reward).position("top center").hideDelay(3e3))});var $=0;t.$on("position:update",function(e,r){if($++,$%1==0){t.markers.bot.lat=r[0],t.markers.bot.lng=r[1];var n={lat:r[0],lng:r[1]};t.paths.main.latlngs.push(n)}}),t.player=l,t.playerStats=c,t.inventory=u,t.pokemon=p,t.attacks=m;var P=function(){t.playerStats.xpPercent=Math.floor((t.playerStats.experience-t.playerStats.prev_level_xp)/(t.playerStats.next_level_xp-t.playerStats.prev_level_xp)*100),t.playerStats.uniquePokedexPercent=Math.floor(t.playerStats.unique_pokedex_entries/151*100),t.playerStats.pokemonInvPercent=Math.floor(t.pokemon.length/t.player.max_pokemon_storage*100),t.playerStats.itemsInvPercent=Math.floor(t.inventory.item_count/t.player.max_item_storage*100)};P(),t.$on("$viewContentLoaded",function(){a.getMap().then(function(e){setTimeout(function(){e.invalidateSize()},3e3)})}),t.map={center:{lat:i[0],lng:i[1],zoom:15}};for(var b={},C=0;C<d.length;C++){var _=d[C];1==_.type&&(_.enabled||_.lure_info)&&(b["fort_"+C]={lat:_.latitude,lng:_.longitude,message:_.latitude+", "+_.longitude,icon:{iconUrl:"assets/images/fort.png",iconSize:[30,32],iconAnchor:[16,31]}})}b.bot={lat:i[0],lng:i[1],message:t.player.username,focus:!0,draggable:!1},t.markers=b,t.paths={main:{color:"#F44336",weight:4,latlngs:[{lat:i[0],lng:i[1]}]}},t.pokemonDataTableOptions=v.newOptions().withOption("order",[[0,"desc"]]).withOption("stateSave",!0),t.expLvlOptions={animate:{duration:1e3,enabled:!0},barColor:"#03A9F4",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.uniquePokedexOptions={animate:{duration:1e3,enabled:!0},barColor:"#FFC107",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.pokemonInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#009688",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.itemsInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#F44336",scaleColor:!1,lineWidth:10,lineCap:"circle"}}]),angular.module("Poketrainer.State.Users",["ui.router"]).config(["$stateProvider",function(e){e.state("public.users",{url:"/",resolve:{Users:["$q","$stateParams","PokeSocket","SocketEvent","UserList",function(e,t,r,n,o){var a=e.defer(),s=function i(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(r.removeListener(n.UserList,i),o.set(e.users),a.resolve())};return r.on(n.UserList,s),r.emit(n.UserList),a.promise}]},controller:"UsersController",templateUrl:"states/users/users.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("UsersController",["$scope","UserList","PokeSocket","SocketEvent",function(e,t,r,n){e.users=t.get(),t.setCurrent("");var o=function(r,n){e.users=t.update(n)};e.$on(n._prefix+n.UserStatus,o)}]),angular.module("Poketrainer.Service.Navigation",[]).factory("Navigation",function(){var e=[],t=function(){return e.sort(function(e,t){var r=e.Priority-t.Priority;return 0===r?e.Label.localeCompare(t.Label):r})},r=function(t,r,n,o,a){"string"!=typeof o&&(o="md md-chevron-right"),"string"!=typeof a&&(a=r),("number"!=typeof n||n<0)&&(n=10),e.push({Label:t,State:r,ActiveState:a,Priority:n,Icon:o})};return{primary:{get:t,register:r}}}),angular.module("Poketrainer.Service.SocketEvent",[]).factory("SocketEvent",function(){return{_prefix:"socket:",UserList:"users",UserStatus:"user_status",Request:"pull",Data:"push",Join:"join",Leave:"leave",Transfer:"transfer",Evolve:"evolve",Snipe:"snipe",Start:"start",Stop:"stop",ResetStats:"reset_stats",ReloadAPI:"reload_api"}}),angular.module("Poketrainer.Service.UserList",[]).factory("UserList",function(){var e=[],t="",r=function(t){for(var r=0;r<t.length;r++)t[r].status="unknown";e=t.sort(function(e,t){return e.username.localeCompare(t.username)})},n=function(t){for(var r=0;r<e.length;r++)e[r].username==t.username&&(e[r].status=t.status);return e},o=function(){return e},a=function(e){t=e},s=function(){for(var r=0;r<e.length;r++)if(e[r].username==t)return e[r];return{}};return{set:r,update:n,get:o,setCurrent:a,getCurrent:s}}),angular.module("Poketrainer.Service.Socket",["btford.socket-io"]).factory("PokeSocket",["socketFactory","$location",function(e,t){var r=window.location.pathname.replace(/\/+$/g,"")+"/socket.io";return e({ioSocket:io.connect(window.location.protocol+"//"+window.location.host+"/poketrainer",{path:r})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZXMvbW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlci5qcyIsInN0YXRlcy9hYnN0cmFjdHMvc3RhdGUuYWJzdHJhY3RzLmpzIiwic3RhdGVzL2Rhc2hib2FyZC9zdGF0ZS5kYXNoYm9hcmQuanMiLCJzdGF0ZXMvdXNlcnMvc3RhdGUudXNlcnMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuTmF2aWdhdGlvbi5qcyIsIm1vZHVsZXMvc2VydmljZXMvc2VydmljZS5Tb2NrZXRFdmVudHMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuVXNlckxpc3QuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJydWxlIiwiJGluamVjdG9yIiwiJGxvY2F0aW9uIiwicGF0aCIsInVybCIsInRvTG93ZXJDYXNlIiwibGVuZ3RoIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJvdGhlcndpc2UiLCJzdHJpY3RNb2RlIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCJydW4iLCIkc3RhdGUiLCIkcm9vdFNjb3BlIiwiJGRvY3VtZW50IiwiJG9uIiwiZXZlbnQiLCJkYXRhIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsIlBva2VTb2NrZXQiLCJTb2NrZXRFdmVudCIsImZvcndhcmQiLCJVc2VyU3RhdHVzIiwib24iLCJEYXRhIiwiJGJyb2FkY2FzdCIsImFjdGlvbiIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJhYnN0cmFjdCIsInZpZXdzIiwiaGVhZGVyIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udGVudCIsInRlbXBsYXRlIiwiJHNjb3BlIiwiJHN0YXRlUGFyYW1zIiwiTmF2aWdhdGlvbiIsIlVzZXJMaXN0IiwibmF2aWdhdGlvbiIsInByaW1hcnkiLCJnZXQiLCJjdXJyZW50IiwibmFtZSIsInVzZXIiLCJnZXRDdXJyZW50IiwicmVsb2FkX2FwaSIsImVtaXQiLCJSZWxvYWRBUEkiLCJ1c2VybmFtZSIsInJlc2V0X3N0YXRzIiwiUmVzZXRTdGF0cyIsInN0b3BfYm90IiwiU3RvcCIsInN0YXJ0X2JvdCIsIlN0YXJ0IiwiX3ByZWZpeCIsInVwZGF0ZSIsInVzZXJFdmVudENiIiwibWVzc2FnZSIsImlzVW5kZWZpbmVkIiwic3VjY2VzcyIsImlzQXJyYXkiLCJ1c2VycyIsInJlbW92ZUxpc3RlbmVyIiwic2V0IiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJ2IiwibGlicmFyaWVzIiwicmVzb2x2ZSIsImxvY2F0aW9uRGF0YSIsIiRxIiwiZCIsImRlZmVyIiwibG9jYXRpb25EYXRhQ2IiLCJ0eXBlIiwiZnJvbUpzb24iLCJyZWplY3QiLCJSZXF1ZXN0IiwidHlwZXMiLCJwcm9taXNlIiwiaW52ZW50b3J5RGF0YSIsImludmVudG9yeURhdGFDYiIsInBsYXllckRhdGEiLCJwbGF5ZXJEYXRhQ2IiLCJwbGF5ZXJTdGF0c0RhdGEiLCJwbGF5ZXJTdGF0c0RhdGFDYiIsInBva2Vtb25EYXRhIiwicG9rZW1vbkRhdGFDYiIsImZvcnRzRGF0YSIsImZvcnRzRGF0YUNiIiwiYXR0YWNrc0RhdGEiLCJhdHRhY2tzRGF0YUNiIiwicmVnaXN0ZXIiLCIkbWRUb2FzdCIsImxlYWZsZXREYXRhIiwiRFRPcHRpb25zQnVpbGRlciIsInNldEN1cnJlbnQiLCJ1c2VyRXZlbnRVcGRhdGUiLCJzdGF0dXMiLCJMZWF2ZSIsInJvb20iLCJKb2luIiwidHJhbnNmZXJfcF9pZCIsInRyYW5zZmVyQ2IiLCJldm9sdmVfZGlzYWJsZWQiLCJ0cmFuc2Zlcl9kaXNhYmxlZCIsImkiLCJwb2tlbW9uIiwiaWQiLCJzcGxpY2UiLCJUcmFuc2ZlciIsInNob3ciLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5IiwidHJhbnNmZXIiLCJwX2lkIiwiZXZvbHZlQ2IiLCJFdm9sdmUiLCJldm9sdmUiLCJzbmlwZWRDYiIsInNuaXBlX2Rpc2FibGVkIiwiU25pcGUiLCJzbmlwZV9jb29yZHMiLCJzbmlwZV9hdXRvIiwic25pcGUiLCJsYXRsbmciLCJpbnZlbnRvcnkiLCJ1cGRhdGVQZXJjZW50YWdlcyIsInBsYXllclN0YXRzIiwicGxheWVyIiwicHVzaCIsIk1hdGgiLCJmbG9vciIsIml2IiwiY3AiLCJwb2tlbW9uX29sZCIsIm9sZCIsInBva2Vtb25fbmV3IiwicmV3YXJkIiwicG9zaXRpb25VcGRhdGVzIiwibWFya2VycyIsImJvdCIsImxhdCIsImxuZyIsIm5ld0xvY2F0aW9uIiwicGF0aHMiLCJtYWluIiwibGF0bG5ncyIsImF0dGFja3MiLCJ4cFBlcmNlbnQiLCJleHBlcmllbmNlIiwicHJldl9sZXZlbF94cCIsIm5leHRfbGV2ZWxfeHAiLCJ1bmlxdWVQb2tlZGV4UGVyY2VudCIsInVuaXF1ZV9wb2tlZGV4X2VudHJpZXMiLCJwb2tlbW9uSW52UGVyY2VudCIsIm1heF9wb2tlbW9uX3N0b3JhZ2UiLCJpdGVtc0ludlBlcmNlbnQiLCJpdGVtX2NvdW50IiwibWF4X2l0ZW1fc3RvcmFnZSIsImdldE1hcCIsInRoZW4iLCJtYXAiLCJzZXRUaW1lb3V0IiwiaW52YWxpZGF0ZVNpemUiLCJjZW50ZXIiLCJ6b29tIiwiZm9ydCIsImVuYWJsZWQiLCJsdXJlX2luZm8iLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImljb24iLCJpY29uVXJsIiwiaWNvblNpemUiLCJpY29uQW5jaG9yIiwiZm9jdXMiLCJkcmFnZ2FibGUiLCJjb2xvciIsIndlaWdodCIsInBva2Vtb25EYXRhVGFibGVPcHRpb25zIiwibmV3T3B0aW9ucyIsIndpdGhPcHRpb24iLCJleHBMdmxPcHRpb25zIiwiYW5pbWF0ZSIsImR1cmF0aW9uIiwiYmFyQ29sb3IiLCJzY2FsZUNvbG9yIiwibGluZVdpZHRoIiwibGluZUNhcCIsInVuaXF1ZVBva2VkZXhPcHRpb25zIiwicG9rZW1vbkludk9wdGlvbnMiLCJpdGVtc0ludk9wdGlvbnMiLCJVc2VycyIsImZhY3RvcnkiLCJoZWFkZXJOYXYiLCJnZXRQcmltYXJ5TWVudSIsInNvcnQiLCJhIiwiYiIsInByaW9yaXR5IiwiUHJpb3JpdHkiLCJMYWJlbCIsImxvY2FsZUNvbXBhcmUiLCJyZWdpc3RlclByaW1hcnlNZW51IiwibGFiZWwiLCJhY3RpdmVTdGF0ZSIsIlN0YXRlIiwiQWN0aXZlU3RhdGUiLCJJY29uIiwidXNlckxpc3QiLCJjdXJyZW50VXNlciIsInNldFVzZXJzIiwiZ2V0VXNlcnMiLCJzZXRDdXJyZW50VXNlciIsImdldEN1cnJlbnRVc2VyIiwic29ja2V0RmFjdG9yeSIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJpb1NvY2tldCIsImlvIiwiY29ubmVjdCIsInByb3RvY29sIiwiaG9zdCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsZUFDQSwrQkFDQSx3Q0FDQSxpQ0FDQSxrQ0FDQSw2QkFDQSwrQkFDQSw4QkFDQSwyQkFDQSwwQkFDQSxZQUNBLGFBQ0EsZUFDQUMsUUFDQSxxQkFDQSxvQkFDQSw2QkFDQSxxQkFDQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUlBSCxFQUFBSSxLQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsTUFBQUMsYUFFQSxNQUFBLE1BQUFGLEVBQUFBLEVBQUFHLE9BQUEsSUFBQUgsRUFBQUksUUFBQSxVQUdBLE1BQUFKLEdBQUFJLFFBQUEsUUFDQUosRUFBQUssUUFBQSxJQUFBLE1BRUFMLEVBQUEsTUFDQU0sVUFBQSxLQUNBWCxFQUFBWSxZQUFBLEdBQ0FYLEVBQUFZLE1BQUEsV0FBQUMsZUFBQSxRQUFBQyxjQUFBLFVBRUFDLEtBQ0EsU0FDQSxhQUNBLFlBQ0EsU0FBQUMs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Q2xCQXZILFdBQUF3SCxFQUNBN0ssV0FBQThLLEtBR0E5TyxRQUFBQyxPQUFBLDhCQUFBLHFCQUFBd04sUUFBQSxjQUNBLGdCQUNBLFlBQ0EsU0FBQXNCLEVBQUF0TyxHQUNBLEdBQUFDLEdBQUFzTyxPQUFBQyxTQUFBQyxTQUFBbk8sUUFBQSxRQUFBLElBQUEsWUFFQSxPQUFBZ08sSUFBQUksU0FBQUMsR0FBQUMsUUFBQUwsT0FBQUMsU0FBQUssU0FBQSxLQUFBTixPQUFBQyxTQUFBTSxLQUFBLGdCQUFBN08sS0FBQUEiLCJmaWxlIjoiYW5ndWxhci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgncG9rZXRyYWluZXInLCBbXHJcblx0J3Bva2V0cmFpbmVyLk1vZHVsZS5UZW1wbGF0ZXMnLFxyXG5cclxuXHQvKiogSW50ZXJuYWwgTW9kdWxlcyAqKi9cclxuXHQnUG9rZXRyYWluZXIuTW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlcicsXHJcblxyXG5cdC8qKiBJbnRlcm5hbCBTZXJ2aWNlcyAqKi9cclxuXHQnUG9rZXRyYWluZXIuU2VydmljZS5OYXZpZ2F0aW9uJyxcclxuXHQnUG9rZXRyYWluZXIuU2VydmljZS5Tb2NrZXRFdmVudCcsXHJcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0JyxcclxuXHQnUG9rZXRyYWluZXIuU2VydmljZS5Vc2VyTGlzdCcsXHJcblxyXG5cdC8qKiBTdGF0ZXMvUm91dGVzICoqL1xyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5BYnN0cmFjdHMnLFxyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5TdGF0dXMnLFxyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5Vc2VycycsXHJcblxyXG5cclxuXHQvKiogRXh0ZXJuYWwgTGlicyAqKi9cclxuXHQndWkucm91dGVyJyxcclxuICAgICduZ01hdGVyaWFsJyxcclxuICAgICduZ01lc3NhZ2VzJ1xyXG5cclxuXHQvKiogSW50ZXJuYWwgRGlyZWN0aXZlcyAqKi9cclxuXHRcclxuXSlcclxuXHJcblx0LmNvbmZpZyhmdW5jdGlvbiBwb2tlVHJhaW5lckNvbmZpZygkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciwgJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XHJcblx0XHQvLyRsb2NhdGlvblByb3ZpZGVyXHJcblx0XHQvL1x0Lmhhc2hQcmVmaXgoJyEnKVxyXG5cdFx0Ly9cdC5odG1sNU1vZGUoZmFsc2UpO1xyXG5cclxuXHRcdCR1cmxSb3V0ZXJQcm92aWRlci5ydWxlKGZ1bmN0aW9uICgkaW5qZWN0b3IsICRsb2NhdGlvbikge1xyXG5cdFx0XHR2YXIgcGF0aCA9ICRsb2NhdGlvbi51cmwoKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0Ly8gY2hlY2sgdG8gc2VlIGlmIHRoZSBwYXRoIGFscmVhZHkgaGFzIGEgc2xhc2ggd2hlcmUgaXQgc2hvdWxkIGJlXHJcblx0XHRcdGlmIChwYXRoW3BhdGgubGVuZ3RoIC0gMV0gPT09ICcvJyB8fCBwYXRoLmluZGV4T2YoJy8/JykgPiAtMSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHBhdGguaW5kZXhPZignPycpID4gLTEpIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5yZXBsYWNlKCc/JywgJy8/Jyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBwYXRoICsgJy8nO1xyXG5cdFx0fSlcclxuXHRcdC5vdGhlcndpc2UoJy8nKTtcclxuXHJcblx0XHQkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5zdHJpY3RNb2RlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3JlZCcpO1xyXG5cclxuXHR9KVxyXG5cclxuXHQucnVuKGZ1bmN0aW9uIHBva2VUcmFpbmVyUnVuICgkc3RhdGUsICRyb290U2NvcGUsICRkb2N1bWVudCkge1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJ2ludmVudG9yeTp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpe1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiSW52ZW50b3J5ISEgOkQgXCIpXHJcblx0XHR9KTtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRkb2N1bWVudC5maW5kKCcuc2NyZWVuLWxvYWRpbmctb3ZlcmxheScpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHRcdH0pO1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQkZG9jdW1lbnQuZmluZCgnLnNjcmVlbi1sb2FkaW5nLW92ZXJsYXknKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0XHR9KTtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcclxuXHRcdFx0aWYgKGVycm9yID09PSBcIm9mZmxpbmVcIikge1xyXG5cdFx0XHRcdCRzdGF0ZS5nbyhcInB1YmxpYy51c2Vyc1wiKTtcclxuXHRcdFx0XHQkZG9jdW1lbnQuZmluZCgnLnNjcmVlbi1sb2FkaW5nLW92ZXJsYXknKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pXHJcblxyXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLk1vZHVsZS5Tb2NrZXRFdmVudEVtaXR0ZXInLCBbJ1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0J10pXHJcbiAgICAucnVuKGZ1bmN0aW9uIHJ1blNvY2tldEVtaXR0ZXIoJHJvb3RTY29wZSwgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG5cclxuICAgICAgICBQb2tlU29ja2V0LmZvcndhcmQoU29ja2V0RXZlbnQuVXNlclN0YXR1cyk7XHJcblxyXG4gICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuRGF0YSwgZnVuY3Rpb24gZ2V0U29ja2V0UHVzaChkYXRhKXtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkdvdCBwdXNoIGRhdGE6IFwiLCBkYXRhKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KGRhdGEuZXZlbnQgKyBcIjpcIiArIGRhdGEuYWN0aW9uLCBkYXRhLmRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBCcm9hZGNhc3QgZXZlbnRzIHVzaW5nICRyb290U2NvcGUuJGJyb2FkY2FzdChbbmFtZV0sIFtkYXRhXSk7XHJcbiAgICB9KVxyXG5cclxuOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TdGF0ZS5BYnN0cmFjdHMnLCBbXHJcbiAgICAndWkucm91dGVyJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdwdWJsaWMnLCB7XHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJoZWFkZXJcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy9hYnN0cmFjdHMvaGVhZGVyLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRlbnRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzx1aS12aWV3Lz4nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFNvY2tldEV2ZW50LCBQb2tlU29ja2V0LCBOYXZpZ2F0aW9uLCBVc2VyTGlzdCl7XHJcbiAgICAgICAgJHNjb3BlLm5hdmlnYXRpb24gPSBOYXZpZ2F0aW9uLnByaW1hcnkuZ2V0KCk7XHJcbiAgICAgICAgJHNjb3BlLnN0YXRlID0gJHN0YXRlLmN1cnJlbnQubmFtZTtcclxuICAgICAgICAkc2NvcGUudXNlciA9IFVzZXJMaXN0LmdldEN1cnJlbnQoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlbG9hZF9hcGkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlbG9hZEFQSSwge3VzZXJuYW1lOiAkc2NvcGUudXNlci51c2VybmFtZX0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5yZXNldF9zdGF0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVzZXRTdGF0cywge3VzZXJuYW1lOiAkc2NvcGUudXNlci51c2VybmFtZX0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zdG9wX2JvdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuU3RvcCwge3VzZXJuYW1lOiAkc2NvcGUudXNlci51c2VybmFtZX0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zdGFydF9ib3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlN0YXJ0LCB7dXNlcm5hbWU6ICRzY29wZS51c2VyLnVzZXJuYW1lfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIGxpc3RlbiBmb3IgbmV3IGV2ZW50c1xyXG4gICAgICAgICRzY29wZS4kb24oU29ja2V0RXZlbnQuX3ByZWZpeCArIFNvY2tldEV2ZW50LlVzZXJTdGF0dXMsIGZ1bmN0aW9uKGV2ZW50LCB1c2VyKSB7XHJcbiAgICAgICAgICAgIFVzZXJMaXN0LnVwZGF0ZSh1c2VyKTtcclxuICAgICAgICAgICAgJHNjb3BlLnVzZXIgPSBVc2VyTGlzdC5nZXRDdXJyZW50KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCdjdXJyZW50VXNlcl86Y2hhbmdlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVzZXIgPSBVc2VyTGlzdC5nZXRDdXJyZW50KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zdGF0ZSA9IHRvU3RhdGUubmFtZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHVzZXJFdmVudENiID0gZnVuY3Rpb24gdXNlckV2ZW50Q2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8ICFtZXNzYWdlLnN1Y2Nlc3MgfHwgIWFuZ3VsYXIuaXNBcnJheShtZXNzYWdlLnVzZXJzKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5Vc2VyTGlzdCwgdXNlckV2ZW50Q2IpO1xyXG4gICAgICAgICAgICBVc2VyTGlzdC5zZXQobWVzc2FnZS51c2Vycyk7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyID0gVXNlckxpc3QuZ2V0Q3VycmVudCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuc3RhdGUgIT09ICdwdWJsaWMudXNlcnMnKSB7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuVXNlckxpc3QsIHVzZXJFdmVudENiKTtcclxuXHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5Vc2VyTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbjsiLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU3RhdGUuU3RhdHVzJywgW1xyXG4gICAgJ3VpLnJvdXRlcicsXHJcbiAgICAndWlHbWFwZ29vZ2xlLW1hcHMnLFxyXG4gICAgJ2NoYXJ0LmpzJyxcclxuICAgICdlYXN5cGllY2hhcnQnLFxyXG4gICAgJ2RhdGF0YWJsZXMnLFxyXG4gICAgJ3VpLWxlYWZsZXQnLFxyXG4gICAgJ25lbUxvZ2dpbmcnXHJcbl0pXHJcblxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsIHVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyKSB7XHJcblxyXG4gICAgICAgIHVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyLmNvbmZpZ3VyZSh7XHJcbiAgICAgICAgICAgIC8va2V5OiAnPE1BUFMgQVBJIEtFWT4nLFxyXG4gICAgICAgICAgICB2OiAnMy4yNCcsXHJcbiAgICAgICAgICAgIGxpYnJhcmllczogJ3dlYXRoZXIsZ2VvbWV0cnksdmlzdWFsaXphdGlvbidcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3B1YmxpYy5kYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgICAgIHVybDogJy9kYXNoYm9hcmQvOnVzZXJuYW1lJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25EYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZUxvY2F0aW9uRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb25EYXRhQ2IgPSBmdW5jdGlvbiBsb2NhdGlvbkRhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdsb2NhdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIGxvY2F0aW9uRGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydsb2NhdGlvbiddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIGludmVudG9yeURhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlSW52ZW50b3J5RGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW52ZW50b3J5RGF0YUNiID0gZnVuY3Rpb24gaW52ZW50b3J5RGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ2ludmVudG9yeScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgaW52ZW50b3J5RGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydpbnZlbnRvcnknXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJEYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZVBsYXllckRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllckRhdGFDYiA9IGZ1bmN0aW9uIHBsYXllckRhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdwbGF5ZXInKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIHBsYXllckRhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsncGxheWVyJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyU3RhdHNEYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZVBsYXllclN0YXRzRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyU3RhdHNEYXRhQ2IgPSBmdW5jdGlvbiBwbGF5ZXJTdGF0c0RhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdwbGF5ZXJfc3RhdHMnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIHBsYXllclN0YXRzRGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydwbGF5ZXJfc3RhdHMnXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBwb2tlbW9uRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQb2tlbW9uRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9rZW1vbkRhdGFDYiA9IGZ1bmN0aW9uIHBva2Vtb25EYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAncG9rZW1vbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgcG9rZW1vbkRhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsncG9rZW1vbiddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIGZvcnRzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVGb3J0c0RhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcnRzRGF0YUNiID0gZnVuY3Rpb24gZm9ydHNEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnZm9ydHMnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIGZvcnRzRGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydmb3J0cyddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIGF0dGFja3NEYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZUF0dGFja3NEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRhY2tzRGF0YUNiID0gZnVuY3Rpb24gYXR0YWNrc0RhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdhdHRhY2tzJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBhdHRhY2tzRGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydhdHRhY2tzJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0ZXMvZGFzaGJvYXJkL2Rhc2hib2FyZC50cGwuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pXHJcblxyXG4gICAgLnJ1bihmdW5jdGlvbiAoTmF2aWdhdGlvbikge1xyXG4gICAgICAgIE5hdmlnYXRpb24ucHJpbWFyeS5yZWdpc3RlcihcIlVzZXJzXCIsIFwicHVibGljLnVzZXJzXCIsIDMwLCAnbWQgbWQtZXZlbnQtYXZhaWxhYmxlJywgJ3B1YmxpYy51c2VycycpO1xyXG4gICAgfSlcclxuXHJcbiAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIGZ1bmN0aW9uIERhc2hib2FyZENvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsICRtZFRvYXN0LCBQb2tlU29ja2V0LCBsZWFmbGV0RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VyTGlzdCwgbG9jYXRpb25EYXRhLCBpbnZlbnRvcnlEYXRhLCBwbGF5ZXJEYXRhLCBwbGF5ZXJTdGF0c0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9rZW1vbkRhdGEsIGZvcnRzRGF0YSwgYXR0YWNrc0RhdGEsIFNvY2tldEV2ZW50LCBEVE9wdGlvbnNCdWlsZGVyKSB7XHJcbiAgICAgICAgVXNlckxpc3Quc2V0Q3VycmVudCgkc3RhdGVQYXJhbXMudXNlcm5hbWUpO1xyXG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChcImN1cnJlbnRVc2VyXzpjaGFuZ2VkXCIpO1xyXG5cclxuICAgICAgICB2YXIgdXNlckV2ZW50VXBkYXRlID0gZnVuY3Rpb24gdXNlckV2ZW50VXBkYXRlKGV2ZW50LCBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGlmICgkc3RhdGVQYXJhbXMudXNlcm5hbWUgPT0gbWVzc2FnZS51c2VybmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzID09ICdvZmZsaW5lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncHVibGljLnVzZXJzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS4kb24oU29ja2V0RXZlbnQuX3ByZWZpeCArIFNvY2tldEV2ZW50LlVzZXJTdGF0dXMsIHVzZXJFdmVudFVwZGF0ZSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oXCIkZGVzdHJveVwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuTGVhdmUsIHtyb29tOiAkc3RhdGVQYXJhbXMudXNlcm5hbWV9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBKb2luIHNwZWNpZmljIHVzZXIgcm9vbVxyXG4gICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5Kb2luLCB7cm9vbTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lfSk7XHJcblxyXG4gICAgICAgIC8qKiBUUkFOU0ZFUiAqKi9cclxuICAgICAgICB2YXIgdHJhbnNmZXJfcF9pZDtcclxuICAgICAgICB2YXIgdHJhbnNmZXJDYiA9IGZ1bmN0aW9uIHRyYW5zZmVyQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucG9rZW1vbltpXS5pZCA9PSB0cmFuc2Zlcl9wX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmFuc2Zlcl9wX2lkID0gMDtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5UcmFuc2ZlciwgdHJhbnNmZXJDYik7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudChtZXNzYWdlLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgY2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUudHJhbnNmZXIgPSBmdW5jdGlvbihwX2lkKSB7XHJcbiAgICAgICAgICAgIHRyYW5zZmVyX3BfaWQgPSBwX2lkO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5UcmFuc2ZlciwgdHJhbnNmZXJDYik7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5UcmFuc2Zlciwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIHBfaWQ6IHBfaWR9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogRVZPTFZFICoqL1xyXG4gICAgICAgIHZhciBldm9sdmVDYiA9IGZ1bmN0aW9uIGV2b2x2ZUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmV2b2x2ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5Fdm9sdmUsIGV2b2x2ZUNiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZXZvbHZlID0gZnVuY3Rpb24ocF9pZCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5Fdm9sdmUsIGV2b2x2ZUNiKTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkV2b2x2ZSwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIHBfaWQ6IHBfaWR9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogU05JUEUgKiovXHJcbiAgICAgICAgdmFyIHNuaXBlZENiID0gZnVuY3Rpb24gc25pcGVkQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAvL21lc3NhZ2Uuc3VjY2VzcztcclxuICAgICAgICAgICAgJHNjb3BlLnNuaXBlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoU29ja2V0RXZlbnQuU25pcGUsIHNuaXBlZENiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9jb29yZHMgPSAnJztcclxuICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuc25pcGVfYXV0byA9IGZhbHNlOyAvLyBub3QgaW1wbGVtZW50ZWRcclxuICAgICAgICAkc2NvcGUuc25pcGUgPSBmdW5jdGlvbihzbmlwZV9jb29yZHMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNuaXBlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5TbmlwZSwgc25pcGVkQ2IpO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuU25pcGUsIHt1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLCBsYXRsbmc6IHNuaXBlX2Nvb3Jkc30pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLiRvbignaW52ZW50b3J5OnVwZGF0ZWQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLmludmVudG9yeSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwbGF5ZXJfc3RhdHM6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wbGF5ZXJTdGF0cyA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwbGF5ZXI6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wbGF5ZXIgPSBkYXRhO1xyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgLy8gdGhpcyBtYWtlcyB0aGUgcG9rZW1vbiB0YWJsZSBnbyBjcmF6eSBmb3IgYSBiaXRcclxuICAgICAgICAvLyB3ZSBpbnNlcnQgLyBkZWxldGUgYmFzZWQgb24gb3RoZXIgZXZlbnMsIHNvIGl0IF9zaG91bGRfIGJlIGFjY3VyYXRlIGFueXdheVxyXG4gICAgICAgIC8qJHNjb3BlLiRvbignY2F1Z2h0X3Bva2Vtb246dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wb2tlbW9uID0gZGF0YTtcclxuIMKgIMKgIMKgIMKgfSk7Ki9cclxuIFxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246Y2F1Z2h0JywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb24gPSBkYXRhO1xyXG4gICAgICAgICAgICAvL3Bva2Vtb24uY3JlYXRpb25fdGltZV9tcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUucG9rZW1vbi5wdXNoKHBva2Vtb24pO1xyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0NhdWdodDogJyArIHBva2Vtb24ubmFtZSArICcgKElWOiAnICsgTWF0aC5mbG9vcihwb2tlbW9uLml2KSArICcgfCBDUDogJyArIHBva2Vtb24uY3AgKyAnKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgY2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwb2tlbW9uOnJlbGVhc2VkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb24gPSBkYXRhO1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHBva2Vtb24uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9rZW1vbi5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1JlbGVhc2VkOiAnICsgcG9rZW1vbi5uYW1lICsgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb24uaXYpICsgJyB8IENQOiAnICsgcG9rZW1vbi5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246ZXZvbHZlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2tlbW9uX29sZCA9IGRhdGEub2xkO1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbl9uZXcgPSBkYXRhLm5ldztcclxuICAgICAgICAgICAgZm9yKHZhciBpPSRzY29wZS5wb2tlbW9uLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucG9rZW1vbltpXS5pZCA9PSBwb2tlbW9uX29sZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wb2tlbW9uLnB1c2gocG9rZW1vbl9uZXcpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0V2b2x2ZWQ6ICcgKyBwb2tlbW9uX29sZC5uYW1lICsgJyB0byAnICsgcG9rZW1vbl9uZXcubmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKElWOiAnICsgTWF0aC5mbG9vcihwb2tlbW9uX25ldy5pdikgKyAnIHwgQ1A6ICcgKyBwb2tlbW9uX25ldy5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2ZvcnQ6c3B1bicsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRm9ydCBzcHVuLCByZXdhcmQ6ICcgKyBkYXRhLnJld2FyZClcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcbiBcclxuICAgICAgICB2YXIgcG9zaXRpb25VcGRhdGVzID0gMDtcclxuIMKgIMKgIMKgIMKgJHNjb3BlLiRvbigncG9zaXRpb246dXBkYXRlJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgcG9zaXRpb25VcGRhdGVzKys7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoGlmIChwb3NpdGlvblVwZGF0ZXMgJSAxID09IDApIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLm1hcmtlcnMuYm90LmxhdCA9IGRhdGFbMF07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5tYXJrZXJzLmJvdC5sbmcgPSBkYXRhWzFdO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqB2YXIgbmV3TG9jYXRpb24gPSB7bGF0OiBkYXRhWzBdLCBsbmc6IGRhdGFbMV19O1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUucGF0aHMubWFpbi5sYXRsbmdzLnB1c2gobmV3TG9jYXRpb24pO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqB9XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUucGxheWVyID0gcGxheWVyRGF0YTtcclxuICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMgPSBwbGF5ZXJTdGF0c0RhdGE7XHJcbiAgICAgICAgJHNjb3BlLmludmVudG9yeSA9IGludmVudG9yeURhdGE7XHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb24gPSBwb2tlbW9uRGF0YTtcclxuICAgICAgICAkc2NvcGUuYXR0YWNrcyA9IGF0dGFja3NEYXRhO1xyXG5cclxuICAgICAgICB2YXIgdXBkYXRlUGVyY2VudGFnZXMgPSBmdW5jdGlvbiB1cGRhdGVQZXJjZW50YWdlcygpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnhwUGVyY2VudCA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLnBsYXllclN0YXRzLmV4cGVyaWVuY2UgLSAkc2NvcGUucGxheWVyU3RhdHMucHJldl9sZXZlbF94cClcclxuICAgICAgICAgICAgICAgIC8oJHNjb3BlLnBsYXllclN0YXRzLm5leHRfbGV2ZWxfeHAgLSAkc2NvcGUucGxheWVyU3RhdHMucHJldl9sZXZlbF94cClcclxuICAgICAgICAgICAgICAgICoxMDBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnVuaXF1ZVBva2VkZXhQZXJjZW50ID0gTWF0aC5mbG9vcigkc2NvcGUucGxheWVyU3RhdHMudW5pcXVlX3Bva2VkZXhfZW50cmllcyAvIDE1MSAqIDEwMCk7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cy5wb2tlbW9uSW52UGVyY2VudCA9IE1hdGguZmxvb3IoJHNjb3BlLnBva2Vtb24ubGVuZ3RoIC8gJHNjb3BlLnBsYXllci5tYXhfcG9rZW1vbl9zdG9yYWdlICAqIDEwMCk7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cy5pdGVtc0ludlBlcmNlbnQgPSBNYXRoLmZsb29yKCRzY29wZS5pbnZlbnRvcnkuaXRlbV9jb3VudCAvICRzY29wZS5wbGF5ZXIubWF4X2l0ZW1fc3RvcmFnZSAgKiAxMDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuXHJcbiAgICAgICAgLy8gdmVyeSBkaXJ0eSBmaXggdG8gbWFrZSB0aGUgbGVhZmxldCBtYXAgbG9hZCBmdWxsc2NyZWVuXHJcbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IG1hcC5pbnZhbGlkYXRlU2l6ZSgpOyB9LCAzMDAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLm1hcCA9IHsgY2VudGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXQ6IGxvY2F0aW9uRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxuZzogbG9jYXRpb25EYXRhWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbWFya2VycyA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ydHNEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3J0ID0gZm9ydHNEYXRhW2ldO1xyXG4gICAgICAgICAgICBpZiAoZm9ydC50eXBlID09IDEgJiYgKGZvcnQuZW5hYmxlZCB8fCBmb3J0Lmx1cmVfaW5mbykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtlcnNbJ2ZvcnRfJyArIGldID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdDogZm9ydC5sYXRpdHVkZSxcclxuICAgICAgICAgICAgICAgICAgICBsbmc6IGZvcnQubG9uZ2l0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGZvcnQubGF0aXR1ZGUgKyAnLCAnICsgZm9ydC5sb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsOiAnYXNzZXRzL2ltYWdlcy9mb3J0LnBuZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbMzAsIDMyXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogWzE2LCAzMV1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHWU0sIHdlIGNvdWxkIGRpc3BsYXkgdGhlbSBhc3dlbGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBtYXJrZXJzWydib3QnXSA9IHtcclxuICAgICAgICAgICAgbGF0OiBsb2NhdGlvbkRhdGFbMF0sXHJcbiAgICAgICAgICAgIGxuZzogbG9jYXRpb25EYXRhWzFdLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAkc2NvcGUucGxheWVyLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICBmb2N1czogdHJ1ZSxcclxuICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLm1hcmtlcnMgPSBtYXJrZXJzO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5wYXRocyA9IHtcclxuICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjRjQ0MzM2JyxcclxuICAgICAgICAgICAgICAgIHdlaWdodDogNCxcclxuICAgICAgICAgICAgICAgIGxhdGxuZ3M6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IGxhdDogbG9jYXRpb25EYXRhWzBdLCBsbmc6IGxvY2F0aW9uRGF0YVsxXSB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5wb2tlbW9uRGF0YVRhYmxlT3B0aW9ucyA9IERUT3B0aW9uc0J1aWxkZXIubmV3T3B0aW9ucygpXHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdvcmRlcicsIFtbIDAsIFwiZGVzY1wiIF1dKVxyXG4gICAgICAgICAgICAud2l0aE9wdGlvbignc3RhdGVTYXZlJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8qLndpdGhPcHRpb24oJ3Njcm9sbFknLCAnNzV2aCcpXHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzY3JvbGxYJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdwYWdpbmcnLCB0cnVlKSovXHJcblxyXG4gICAgICAgICRzY29wZS5leHBMdmxPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyMwM0E5RjQnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudW5pcXVlUG9rZWRleE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGU6e1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTAwMCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJDb2xvcjonI0ZGQzEwNycsXHJcbiAgICAgICAgICAgIHNjYWxlQ29sb3I6ZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDoxMCxcclxuICAgICAgICAgICAgbGluZUNhcDonY2lyY2xlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5wb2tlbW9uSW52T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjMDA5Njg4JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLml0ZW1zSW52T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjRjQ0MzM2JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KVxyXG47XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TdGF0ZS5Vc2VycycsIFtcclxuICAgICd1aS5yb3V0ZXInXHJcbl0pXHJcblxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncHVibGljLnVzZXJzJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgVXNlcnM6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCAnVXNlckxpc3QnLCBmdW5jdGlvbiByZXNvbHZlVXNlcnMoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQsIFVzZXJMaXN0KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VyRXZlbnRDYiA9IGZ1bmN0aW9uIHVzZXJFdmVudENiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCAhbWVzc2FnZS5zdWNjZXNzIHx8ICFhbmd1bGFyLmlzQXJyYXkobWVzc2FnZS51c2Vycykpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoU29ja2V0RXZlbnQuVXNlckxpc3QsIHVzZXJFdmVudENiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVXNlckxpc3Quc2V0KG1lc3NhZ2UudXNlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlVzZXJMaXN0LCB1c2VyRXZlbnRDYik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVtaXQgdGhlIGV2ZW50IHRvIG91ciBzb2NrZXRcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBsaXN0ZW5pbmcgZm9yIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5Vc2VyTGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlcnNDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0ZXMvdXNlcnMvdXNlcnMudHBsLmh0bWwnXHJcbiAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KVxyXG5cclxuICAgIC5ydW4oZnVuY3Rpb24gKE5hdmlnYXRpb24pIHtcclxuICAgICAgICBOYXZpZ2F0aW9uLnByaW1hcnkucmVnaXN0ZXIoXCJVc2Vyc1wiLCBcInB1YmxpYy51c2Vyc1wiLCAzMCwgJ21kIG1kLWV2ZW50LWF2YWlsYWJsZScsICdwdWJsaWMudXNlcnMnKTtcclxuICAgIH0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJzQ29udHJvbGxlcicsIGZ1bmN0aW9uIFVzZXJzQ29udHJvbGxlcigkc2NvcGUsIFVzZXJMaXN0LCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCkge1xyXG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgYW55IGRhdGEgZnJvbSB0aGUgZ2xvYmFsIHNjb3BlIGhlcmUuLi4geWV0P1xyXG4gICAgICAgIC8vUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkpvaW4sIHtyb29tOiAnZ2xvYmFsJ30pO1xyXG4gICAgICAgICRzY29wZS51c2VycyA9IFVzZXJMaXN0LmdldCgpO1xyXG4gICAgICAgIFVzZXJMaXN0LnNldEN1cnJlbnQoJycpO1xyXG5cclxuICAgICAgICB2YXIgdXNlckV2ZW50VXBkYXRlID0gZnVuY3Rpb24gdXNlckV2ZW50VXBkYXRlKGV2ZW50LCB1c2VyKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VycyA9IFVzZXJMaXN0LnVwZGF0ZSh1c2VyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBNYWtlIHN1cmUgdG8gbGlzdGVuIGZvciBuZXcgZXZlbnRzXHJcbiAgICAgICAgJHNjb3BlLiRvbihTb2NrZXRFdmVudC5fcHJlZml4ICsgU29ja2V0RXZlbnQuVXNlclN0YXR1cywgdXNlckV2ZW50VXBkYXRlKTtcclxuICAgIH0pXHJcbjtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlNlcnZpY2UuTmF2aWdhdGlvbicsIFtdKVxyXG5cclxuICAgIC5mYWN0b3J5KCdOYXZpZ2F0aW9uJywgZnVuY3Rpb24gTmF2aWdhdGlvbkZhY3RvcnkoKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlck5hdiA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgZ2V0UHJpbWFyeU1lbnUgPSBmdW5jdGlvbiBnZXRQcmltYXJ5TWVudSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlck5hdi5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJpb3JpdHkgPSBhLlByaW9yaXR5IC0gYi5Qcmlvcml0eTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5MYWJlbC5sb2NhbGVDb21wYXJlKGIuTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmlvcml0eTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcmVnaXN0ZXJQcmltYXJ5TWVudSA9IGZ1bmN0aW9uIHJlZ2lzdGVyUHJpbWFyeU1lbnUobGFiZWwsIHN0YXRlLCBwcmlvcml0eSwgaWNvbiwgYWN0aXZlU3RhdGUpIHtcclxuICAgICAgICAgICAgaWYoIHR5cGVvZihpY29uKSAhPT0gXCJzdHJpbmdcIil7XHJcbiAgICAgICAgICAgICAgICBpY29uID0gXCJtZCBtZC1jaGV2cm9uLXJpZ2h0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIHR5cGVvZihhY3RpdmVTdGF0ZSkgIT09IFwic3RyaW5nXCIpe1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlU3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAocHJpb3JpdHkpICE9PSBcIm51bWJlclwiIHx8IHByaW9yaXR5IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcHJpb3JpdHkgPSAxMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaGVhZGVyTmF2LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgTGFiZWw6IGxhYmVsLFxyXG4gICAgICAgICAgICAgICAgU3RhdGU6IHN0YXRlLFxyXG4gICAgICAgICAgICAgICAgQWN0aXZlU3RhdGU6IGFjdGl2ZVN0YXRlLFxyXG4gICAgICAgICAgICAgICAgUHJpb3JpdHk6IHByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgSWNvbjogaWNvblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcmltYXJ5OiB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGdldFByaW1hcnlNZW51LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyUHJpbWFyeU1lbnVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU2VydmljZS5Tb2NrZXRFdmVudCcsIFtdKVxyXG4gICAgLmZhY3RvcnkoJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIF9wcmVmaXg6IFwic29ja2V0OlwiLFxyXG4gICAgICAgICAgICBVc2VyTGlzdDogJ3VzZXJzJyxcclxuICAgICAgICAgICAgVXNlclN0YXR1czogJ3VzZXJfc3RhdHVzJyxcclxuICAgICAgICAgICAgUmVxdWVzdDogJ3B1bGwnLFxyXG4gICAgICAgICAgICBEYXRhOiAncHVzaCcsXHJcbiAgICAgICAgICAgIEpvaW46ICdqb2luJyxcclxuICAgICAgICAgICAgTGVhdmU6ICdsZWF2ZScsXHJcbiAgICAgICAgICAgIFRyYW5zZmVyOiAndHJhbnNmZXInLFxyXG4gICAgICAgICAgICBFdm9sdmU6ICdldm9sdmUnLFxyXG4gICAgICAgICAgICBTbmlwZTogJ3NuaXBlJyxcclxuICAgICAgICAgICAgU3RhcnQ6ICdzdGFydCcsXHJcbiAgICAgICAgICAgIFN0b3A6ICdzdG9wJyxcclxuICAgICAgICAgICAgUmVzZXRTdGF0czogJ3Jlc2V0X3N0YXRzJyxcclxuICAgICAgICAgICAgUmVsb2FkQVBJOiAncmVsb2FkX2FwaSdcclxuICAgICAgICB9XHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU2VydmljZS5Vc2VyTGlzdCcsIFtdKVxyXG5cclxuICAgIC5mYWN0b3J5KCdVc2VyTGlzdCcsIGZ1bmN0aW9uIFVzZXJMaXN0RmFjdG9yeSgpIHtcclxuICAgICAgICB2YXIgdXNlckxpc3QgPSBbXTtcclxuICAgICAgICB2YXIgY3VycmVudFVzZXIgPSAnJztcclxuXHJcbiAgICAgICAgdmFyIHNldFVzZXJzID0gZnVuY3Rpb24gc2V0VXNlcnModXNlcnMpIHtcclxuICAgICAgICAgICAgLy8gc2hvdyBhbGwgdXNlcnMgdG8gdW5rbm93biBzdGF0ZSB1bnRpbCB3ZSByZWNlaXZlIGEgcHJvcGVyIHN0YXRlXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXNlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHVzZXJzW2ldLnN0YXR1cyA9ICd1bmtub3duJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1c2VyTGlzdCA9IHVzZXJzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLnVzZXJuYW1lLmxvY2FsZUNvbXBhcmUoYi51c2VybmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHVzZXJFdmVudFVwZGF0ZSA9IGZ1bmN0aW9uIHVzZXJFdmVudFVwZGF0ZSh1c2VyKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXNlckxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VyTGlzdFtpXS51c2VybmFtZSA9PSB1c2VyLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckxpc3RbaV0uc3RhdHVzID0gdXNlci5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJMaXN0O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGdldFVzZXJzID0gZnVuY3Rpb24gZ2V0VXNlcnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyTGlzdDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uIHNldEN1cnJlbnRVc2VyKHVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gdXNlcm5hbWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZ2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbiBzZXRDdXJyZW50VXNlcigpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2VyTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJMaXN0W2ldLnVzZXJuYW1lID09IGN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJMaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXQ6IHNldFVzZXJzLFxyXG4gICAgICAgICAgICB1cGRhdGU6IHVzZXJFdmVudFVwZGF0ZSxcclxuICAgICAgICAgICAgZ2V0OiBnZXRVc2VycyxcclxuICAgICAgICAgICAgc2V0Q3VycmVudDogc2V0Q3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIGdldEN1cnJlbnQ6IGdldEN1cnJlbnRVc2VyXHJcbiAgICAgICAgfTtcclxuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
