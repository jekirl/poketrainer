angular.module("poketrainer",["poketrainer.Module.Templates","Poketrainer.Module.SocketEventEmitter","Poketrainer.Service.Navigation","Poketrainer.Service.SocketEvent","Poketrainer.Service.Socket","Poketrainer.Service.UserList","Poketrainer.State.Abstracts","Poketrainer.State.Status","Poketrainer.State.Users","ui.router","ngMaterial","ngMessages"]).config(["$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider","$mdThemingProvider",function(e,t,r,n){e.rule(function(e,t){var r=t.url().toLowerCase();if(!("/"===r[r.length-1]||r.indexOf("/?")>-1))return r.indexOf("?")>-1?r.replace("?","/?"):r+"/"}).otherwise("/"),r.strictMode(!1),n.theme("default").primaryPalette("blue").accentPalette("red")}]).run(["$state","$rootScope","$document",function(e,t,r){t.$on("inventory:updated",function(e,t){}),t.$on("$stateChangeStart",function(){r.find(".screen-loading-overlay").removeClass("hidden")}),t.$on("$stateChangeSuccess",function(){r.find(".screen-loading-overlay").addClass("hidden")}),t.$on("$stateChangeError",function(t,n,o,a,s,i){"offline"===i&&(e.go("public.users"),r.find(".screen-loading-overlay").removeClass("hidden"))})}]),angular.module("Poketrainer.Module.SocketEventEmitter",["Poketrainer.Service.Socket"]).run(["$rootScope","PokeSocket","SocketEvent",function(e,t,r){t.forward(r.UserStatus),t.on(r.Data,function(t){e.$broadcast(t.event+":"+t.action,t.data)})}]),angular.module("Poketrainer.State.Abstracts",["ui.router"]).config(["$stateProvider",function(e){e.state("public",{"abstract":!0,views:{header:{templateUrl:"states/abstracts/header.tpl.html",controller:"HeaderController"},content:{template:"<ui-view/>"}}})}]).controller("HeaderController",["$rootScope","$scope","$state","$stateParams","SocketEvent","PokeSocket","Navigation","UserList",function(e,t,r,n,o,a,s,i){t.navigation=s.primary.get(),t.state=r.current.name,t.user=i.getCurrent(),t.reload_api=function(){a.emit(o.ReloadAPI,{username:t.user.username})},t.reset_stats=function(){a.emit(o.ResetStats,{username:t.user.username})},t.stop_bot=function(){a.emit(o.Stop,{username:t.user.username})},t.start_bot=function(){a.emit(o.Start,{username:t.user.username})},t.$on(o._prefix+o.UserStatus,function(e,r){i.update(r),t.user=i.getCurrent()}),e.$on("currentUser_:changed",function(){t.user=i.getCurrent()}),e.$on("$stateChangeSuccess",function(e,r,n,o,a){t.state=r.name});var u=function l(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(a.removeListener(o.UserList,l),i.set(e.users),t.user=i.getCurrent())};"public.users"!==t.state&&(a.on(o.UserList,u),a.emit(o.UserList))}]),angular.module("Poketrainer.State.Status",["ui.router","uiGmapgoogle-maps","chart.js","easypiechart","datatables","ui-leaflet","nemLogging"]).config(["$stateProvider","uiGmapGoogleMapApiProvider",function(e,t){t.configure({v:"3.24",libraries:"weather,geometry,visualization"}),e.state("public.dashboard",{url:"/dashboard/:username",resolve:{locationData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"location"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["location"]}),o.promise}],inventoryData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"inventory"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["inventory"]}),o.promise}],playerData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["player"]}),o.promise}],playerStatsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player_stats"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["player_stats"]}),o.promise}],pokemonData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"pokemon"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["pokemon"]}),o.promise}],attacksData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,r,n){var o=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"attacks"==e.type)return e.success?void o.resolve(angular.fromJson(e.data)):void o.reject("offline")};return r.on(n.Request,a),r.emit(n.Request,{username:t.username,types:["attacks"]}),o.promise}]},controller:"DashboardController",templateUrl:"states/dashboard/dashboard.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("DashboardController",["$rootScope","$scope","$stateParams","$mdToast","PokeSocket","leafletData","UserList","locationData","inventoryData","playerData","playerStatsData","pokemonData","attacksData","SocketEvent","DTOptionsBuilder",function(e,t,r,n,o,a,s,i,u,l,c,p,d,m,f){s.setCurrent(r.username),e.$broadcast("currentUser_:changed");var v=function(e,t){r.username==t.username&&"offline"==t.status&&$state.go("public.users")};t.$on(m._prefix+m.UserStatus,v),t.$on("$destroy",function(){o.emit(m.Leave,{room:r.username})}),o.emit(m.Join,{room:r.username});var k,g=function P(e){if(t.evolve_disabled=!1,t.transfer_disabled=!1,e.success)for(var r=t.pokemon.length-1;r>=0;r--)t.pokemon[r].id==k&&t.pokemon.splice(r,1);k=0,o.removeListener(m.Transfer,P),n.show(n.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.transfer_disabled=!1,t.transfer=function(e){k=e,t.evolve_disabled=!0,t.transfer_disabled=!0,o.on(m.Transfer,g),o.emit(m.Transfer,{username:r.username,p_id:e})};var S=function b(e){t.evolve_disabled=!1,t.transfer_disabled=!1,o.removeListener(m.Evolve,b),n.show(n.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.evolve_disabled=!1,t.evolve=function(e){t.evolve_disabled=!0,t.transfer_disabled=!0,o.on(m.Evolve,S),o.emit(m.Evolve,{username:r.username,p_id:e})};var y=function C(e){t.snipe_disabled=!1,o.removeListener(m.Snipe,C),n.show(n.simple().textContent(e.message).position("top center").hideDelay(3e3))};t.snipe_coords="",t.snipe_disabled=!1,t.snipe_auto=!1,t.snipe=function(e){t.snipe_disabled=!0,o.on(m.Snipe,y),o.emit(m.Snipe,{username:r.username,latlng:e})},t.$on("inventory:updated",function(e,r){t.inventory=r,$()}),t.$on("player_stats:updated",function(e,r){t.playerStats=r,$()}),t.$on("player:updated",function(e,r){t.player=r,$()}),t.$on("pokemon:caught",function(e,r){var o=r;t.pokemon.push(o),$(),n.show(n.simple().textContent("Caught: "+o.name+" (IV: "+Math.floor(o.iv)+" | CP: "+o.cp+")").position("top center").hideDelay(3e3))}),t.$on("pokemon:released",function(e,r){for(var o=r,a=t.pokemon.length-1;a>=0;a--)t.pokemon[a].id==o.id&&t.pokemon.splice(a,1);$(),n.show(n.simple().textContent("Released: "+o.name+" (IV: "+Math.floor(o.iv)+" | CP: "+o.cp+")").position("top center").hideDelay(3e3))}),t.$on("pokemon:evolved",function(e,r){for(var o=r.old,a=r["new"],s=t.pokemon.length-1;s>=0;s--)t.pokemon[s].id==o.id&&t.pokemon.splice(s,1);t.pokemon.push(a),n.show(n.simple().textContent("Evolved: "+o.name+" to "+a.name+" (IV: "+Math.floor(a.iv)+" | CP: "+a.cp+")").position("top center").hideDelay(3e3))}),t.$on("fort:spun",function(e,t){n.show(n.simple().textContent("Fort spun, reward: "+t.reward).position("top center").hideDelay(3e3))});var h=0;t.$on("position:update",function(e,r){if(h++,h%5==0){t.markers.bot.lat=r[0],t.markers.bot.lng=r[1];var n={lat:r[0],lng:r[1]};t.paths.main.latlngs.push(n)}}),t.player=l,t.playerStats=c,t.inventory=u,t.pokemon=p,t.attacks=d;var $=function(){t.playerStats.xpPercent=Math.floor((t.playerStats.experience-t.playerStats.prev_level_xp)/(t.playerStats.next_level_xp-t.playerStats.prev_level_xp)*100),t.playerStats.uniquePokedexPercent=Math.floor(t.playerStats.unique_pokedex_entries/151*100),t.playerStats.pokemonInvPercent=Math.floor(t.pokemon.length/t.player.max_pokemon_storage*100),t.playerStats.itemsInvPercent=Math.floor(t.inventory.item_count/t.player.max_item_storage*100)};$(),t.$on("$viewContentLoaded",function(){a.getMap().then(function(e){setTimeout(function(){e.invalidateSize()},3e3)})}),t.map={center:{lat:i[0],lng:i[1],zoom:15}},t.markers={bot:{lat:i[0],lng:i[1],message:t.player.username,focus:!0,draggable:!1}},t.paths={main:{color:"#F44336",weight:4,latlngs:[{lat:i[0],lng:i[1]}]}},t.pokemonDataTableOptions=f.newOptions().withOption("order",[[0,"desc"]]).withOption("stateSave",!0),t.expLvlOptions={animate:{duration:1e3,enabled:!0},barColor:"#03A9F4",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.uniquePokedexOptions={animate:{duration:1e3,enabled:!0},barColor:"#FFC107",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.pokemonInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#009688",scaleColor:!1,lineWidth:10,lineCap:"circle"},t.itemsInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#F44336",scaleColor:!1,lineWidth:10,lineCap:"circle"}}]),angular.module("Poketrainer.State.Users",["ui.router"]).config(["$stateProvider",function(e){e.state("public.users",{url:"/",resolve:{Users:["$q","$stateParams","PokeSocket","SocketEvent","UserList",function(e,t,r,n,o){var a=e.defer(),s=function i(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(r.removeListener(n.UserList,i),o.set(e.users),a.resolve())};return r.on(n.UserList,s),r.emit(n.UserList),a.promise}]},controller:"UsersController",templateUrl:"states/users/users.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("UsersController",["$scope","UserList","PokeSocket","SocketEvent",function(e,t,r,n){e.users=t.get(),t.setCurrent("");var o=function(r,n){e.users=t.update(n)};e.$on(n._prefix+n.UserStatus,o)}]),angular.module("Poketrainer.Service.Navigation",[]).factory("Navigation",function(){var e=[],t=function(){return e.sort(function(e,t){var r=e.Priority-t.Priority;return 0===r?e.Label.localeCompare(t.Label):r})},r=function(t,r,n,o,a){"string"!=typeof o&&(o="md md-chevron-right"),"string"!=typeof a&&(a=r),("number"!=typeof n||n<0)&&(n=10),e.push({Label:t,State:r,ActiveState:a,Priority:n,Icon:o})};return{primary:{get:t,register:r}}}),angular.module("Poketrainer.Service.SocketEvent",[]).factory("SocketEvent",function(){return{_prefix:"socket:",UserList:"users",UserStatus:"user_status",Request:"pull",Data:"push",Join:"join",Leave:"leave",Transfer:"transfer",Evolve:"evolve",Snipe:"snipe",Start:"start",Stop:"stop",ResetStats:"reset_stats",ReloadAPI:"reload_api"}}),angular.module("Poketrainer.Service.UserList",[]).factory("UserList",function(){var e=[],t="",r=function(t){for(var r=0;r<t.length;r++)t[r].status="unknown";e=t.sort(function(e,t){return e.username.localeCompare(t.username)})},n=function(t){for(var r=0;r<e.length;r++)e[r].username==t.username&&(e[r].status=t.status);return e},o=function(){return e},a=function(e){t=e},s=function(){for(var r=0;r<e.length;r++)if(e[r].username==t)return e[r];return{}};return{set:r,update:n,get:o,setCurrent:a,getCurrent:s}}),angular.module("Poketrainer.Service.Socket",["btford.socket-io"]).factory("PokeSocket",["socketFactory","$location",function(e,t){var r=window.location.pathname.replace(/\/+$/g,"")+"/socket.io";return e({ioSocket:io.connect(window.location.protocol+"//"+window.location.host+"/poketrainer",{path:r})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZXMvbW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlci5qcyIsInN0YXRlcy9hYnN0cmFjdHMvc3RhdGUuYWJzdHJhY3RzLmpzIiwic3RhdGVzL2Rhc2hib2FyZC9zdGF0ZS5kYXNoYm9hcmQuanMiLCJzdGF0ZXMvdXNlcnMvc3RhdGUudXNlcnMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuTmF2aWdhdGlvbi5qcyIsIm1vZHVsZXMvc2VydmljZXMvc2VydmljZS5Tb2NrZXRFdmVudHMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuVXNlckxpc3QuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJydWxlIiwiJGluamVjdG9yIiwiJGxvY2F0aW9uIiwicGF0aCIsInVybCIsInRvTG93ZXJDYXNlIiwibGVuZ3RoIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJvdGhlcndpc2UiLCJzdHJpY3RNb2RlIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCJydW4iLCIkc3RhdGUiLCIkcm9vdFNjb3BlIiwiJGRvY3VtZW50IiwiJG9uIiwiZXZlbnQiLCJkYXRhIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJnbyIsIlBva2VTb2NrZXQiLCJTb2NrZXRFdmVudCIsImZvcndhcmQiLCJVc2VyU3RhdHVzIiwib24iLCJEYXRhIiwiJGJyb2FkY2FzdCIsImFjdGlvbiIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJhYnN0cmFjdCIsInZpZXdzIiwiaGVhZGVyIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udGVudCIsInRlbXBsYXRlIiwiJHNjb3BlIiwiJHN0YXRlUGFyYW1zIiwiTmF2aWdhdGlvbiIsIlVzZXJMaXN0IiwibmF2aWdhdGlvbiIsInByaW1hcnkiLCJnZXQiLCJjdXJyZW50IiwibmFtZSIsInVzZXIiLCJnZXRDdXJyZW50IiwicmVsb2FkX2FwaSIsImVtaXQiLCJSZWxvYWRBUEkiLCJ1c2VybmFtZSIsInJlc2V0X3N0YXRzIiwiUmVzZXRTdGF0cyIsInN0b3BfYm90IiwiU3RvcCIsInN0YXJ0X2JvdCIsIlN0YXJ0IiwiX3ByZWZpeCIsInVwZGF0ZSIsInVzZXJFdmVudENiIiwibWVzc2FnZSIsImlzVW5kZWZpbmVkIiwic3VjY2VzcyIsImlzQXJyYXkiLCJ1c2VycyIsInJlbW92ZUxpc3RlbmVyIiwic2V0IiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJ2IiwibGlicmFyaWVzIiwicmVzb2x2ZSIsImxvY2F0aW9uRGF0YSIsIiRxIiwiZCIsImRlZmVyIiwibG9jYXRpb25EYXRhQ2IiLCJ0eXBlIiwiZnJvbUpzb24iLCJyZWplY3QiLCJSZXF1ZXN0IiwidHlwZXMiLCJwcm9taXNlIiwiaW52ZW50b3J5RGF0YSIsImludmVudG9yeURhdGFDYiIsInBsYXllckRhdGEiLCJwbGF5ZXJEYXRhQ2IiLCJwbGF5ZXJTdGF0c0RhdGEiLCJwbGF5ZXJTdGF0c0RhdGFDYiIsInBva2Vtb25EYXRhIiwicG9rZW1vbkRhdGFDYiIsImF0dGFja3NEYXRhIiwiYXR0YWNrc0RhdGFDYiIsInJlZ2lzdGVyIiwiJG1kVG9hc3QiLCJsZWFmbGV0RGF0YSIsIkRUT3B0aW9uc0J1aWxkZXIiLCJzZXRDdXJyZW50IiwidXNlckV2ZW50VXBkYXRlIiwic3RhdHVzIiwiTGVhdmUiLCJyb29tIiwiSm9pbiIsInRyYW5zZmVyX3BfaWQiLCJ0cmFuc2ZlckNiIiwiZXZvbHZlX2Rpc2FibGVkIiwidHJhbnNmZXJfZGlzYWJsZWQiLCJpIiwicG9rZW1vbiIsImlkIiwic3BsaWNlIiwiVHJhbnNmZXIiLCJzaG93Iiwic2ltcGxlIiwidGV4dENvbnRlbnQiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInRyYW5zZmVyIiwicF9pZCIsImV2b2x2ZUNiIiwiRXZvbHZlIiwiZXZvbHZlIiwic25pcGVkQ2IiLCJzbmlwZV9kaXNhYmxlZCIsIlNuaXBlIiwic25pcGVfY29vcmRzIiwic25pcGVfYXV0byIsInNuaXBlIiwibGF0bG5nIiwiaW52ZW50b3J5IiwidXBkYXRlUGVyY2VudGFnZXMiLCJwbGF5ZXJTdGF0cyIsInBsYXllciIsInB1c2giLCJNYXRoIiwiZmxvb3IiLCJpdiIsImNwIiwicG9rZW1vbl9vbGQiLCJvbGQiLCJwb2tlbW9uX25ldyIsInJld2FyZCIsInBvc2l0aW9uVXBkYXRlcyIsIm1hcmtlcnMiLCJib3QiLCJsYXQiLCJsbmciLCJuZXdMb2NhdGlvbiIsInBhdGhzIiwibWFpbiIsImxhdGxuZ3MiLCJhdHRhY2tzIiwieHBQZXJjZW50IiwiZXhwZXJpZW5jZSIsInByZXZfbGV2ZWxfeHAiLCJuZXh0X2xldmVsX3hwIiwidW5pcXVlUG9rZWRleFBlcmNlbnQiLCJ1bmlxdWVfcG9rZWRleF9lbnRyaWVzIiwicG9rZW1vbkludlBlcmNlbnQiLCJtYXhfcG9rZW1vbl9zdG9yYWdlIiwiaXRlbXNJbnZQZXJjZW50IiwiaXRlbV9jb3VudCIsIm1heF9pdGVtX3N0b3JhZ2UiLCJnZXRNYXAiLCJ0aGVuIiwibWFwIiwic2V0VGltZW91dCIsImludmFsaWRhdGVTaXplIiwiY2VudGVyIiwiem9vbSIsImZvY3VzIiwiZHJhZ2dhYmxlIiwiY29sb3IiLCJ3ZWlnaHQiLCJwb2tlbW9uRGF0YVRhYmxlT3B0aW9ucyIsIm5ld09wdGlvbnMiLCJ3aXRoT3B0aW9uIiwiZXhwTHZsT3B0aW9ucyIsImFuaW1hdGUiLCJkdXJhdGlvbiIsImVuYWJsZWQiLCJiYXJDb2xvciIsInNjYWxlQ29sb3IiLCJsaW5lV2lkdGgiLCJsaW5lQ2FwIiwidW5pcXVlUG9rZWRleE9wdGlvbnMiLCJwb2tlbW9uSW52T3B0aW9ucyIsIml0ZW1zSW52T3B0aW9ucyIsIlVzZXJzIiwiZmFjdG9yeSIsImhlYWRlck5hdiIsImdldFByaW1hcnlNZW51Iiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJQcmlvcml0eSIsIkxhYmVsIiwibG9jYWxlQ29tcGFyZSIsInJlZ2lzdGVyUHJpbWFyeU1lbnUiLCJsYWJlbCIsImljb24iLCJhY3RpdmVTdGF0ZSIsIlN0YXRlIiwiQWN0aXZlU3RhdGUiLCJJY29uIiwidXNlckxpc3QiLCJjdXJyZW50VXNlciIsInNldFVzZXJzIiwiZ2V0VXNlcnMiLCJzZXRDdXJyZW50VXNlciIsImdldEN1cnJlbnRVc2VyIiwic29ja2V0RmFjdG9yeSIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJpb1NvY2tldCIsImlvIiwiY29ubmVjdCIsInByb3RvY29sIiwiaG9zdCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsZUFDQSwrQkFDQSx3Q0FDQSxpQ0FDQSxrQ0FDQSw2QkFDQSwrQkFDQSw4QkFDQSwyQkFDQSwwQkFDQSxZQUNBLGFBQ0EsZUFDQUMsUUFDQSxxQkFDQSxvQkFDQSw2QkFDQSxxQkFDQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUlBSCxFQUFBSSxLQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsTUFBQUMsYUFFQSxNQUFBLE1BQUFGLEVBQUFBLEVBQUFHLE9BQUEsSUFBQUgsRUFBQUksUUFBQSxVQUdBLE1BQUFKLEdBQUFJLFFBQUEsUUFDQUosRUFBQUssUUFBQSxJQUFBLE1BRUFMLEVBQUEsTUFDQU0sVUFBQSxLQUNBWCxFQUFBWSxZQUFBLEdBQ0FYLEVBQUFZLE1BQUEsV0FBQUMsZUFBQSxRQUFBQyxjQUFBLFVBRUFDLEtBQ0EsU0FDQSxhQUNBLFlBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUQsRUFBQUUsSUFBQSxvQkFBQSxTQUFBQyxFQUFBQyxNQUVBSixFQUFBRSxJQUFBLG9CQUFBLFdBQ0FELEVBQUFJLEtBQUEsMkJBQUFDLFlBQUEsWUFF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QUEsV0FDQSxJQUFBLEdBQUF4RyxHQUFBLEVBQUFBLEVBQUFtRyxFQUFBbk4sT0FBQWdILElDM0NBLEdBQUFtRyxFQUFBbkcsR0FBQXpELFVBQUE2SixFQUNBLE1BQUFELEdBQUFuRyxFQUdBLFVBRUEsUUFDQXpDLElBQUE4SSxFQUNBdEosT0FBQXdDLEVBQ0F4RCxJQUFBdUssRUFDQWhILFdBQUFpSCxFQUNBcEssV0FBQXFLLEtBR0FyTyxRQUFBQyxPQUFBLDhCQUFBLHFCQUFBOE0sUUFBQSxjQUNBLGdCQUNBLFlBQ0EsU0FBQXVCLEVBQUE3TixHQUNBLEdBQUFDLEdBQUE2TixPQUFBQyxTQUFBQyxTQUFBMU4sUUFBQSxRQUFBLElBQUEsWUNqQkEsT0FBQXVOLElBQUFJLFNBQUFDLEdBQUFDLFFBQUFMLE9BQUFDLFNBQUFLLFNBQUEsS0FBQU4sT0FBQUMsU0FBQU0sS0FBQSxnQkFBQXBPLEtBQUFBIiwiZmlsZSI6ImFuZ3VsYXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ3Bva2V0cmFpbmVyJywgW1xyXG5cdCdwb2tldHJhaW5lci5Nb2R1bGUuVGVtcGxhdGVzJyxcclxuXHJcblx0LyoqIEludGVybmFsIE1vZHVsZXMgKiovXHJcblx0J1Bva2V0cmFpbmVyLk1vZHVsZS5Tb2NrZXRFdmVudEVtaXR0ZXInLFxyXG5cclxuXHQvKiogSW50ZXJuYWwgU2VydmljZXMgKiovXHJcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuTmF2aWdhdGlvbicsXHJcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0RXZlbnQnLFxyXG5cdCdQb2tldHJhaW5lci5TZXJ2aWNlLlNvY2tldCcsXHJcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuVXNlckxpc3QnLFxyXG5cclxuXHQvKiogU3RhdGVzL1JvdXRlcyAqKi9cclxuXHQnUG9rZXRyYWluZXIuU3RhdGUuQWJzdHJhY3RzJyxcclxuXHQnUG9rZXRyYWluZXIuU3RhdGUuU3RhdHVzJyxcclxuXHQnUG9rZXRyYWluZXIuU3RhdGUuVXNlcnMnLFxyXG5cclxuXHJcblx0LyoqIEV4dGVybmFsIExpYnMgKiovXHJcblx0J3VpLnJvdXRlcicsXHJcbiAgICAnbmdNYXRlcmlhbCcsXHJcbiAgICAnbmdNZXNzYWdlcydcclxuXHJcblx0LyoqIEludGVybmFsIERpcmVjdGl2ZXMgKiovXHJcblx0XHJcbl0pXHJcblxyXG5cdC5jb25maWcoZnVuY3Rpb24gcG9rZVRyYWluZXJDb25maWcoJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIsICRtZFRoZW1pbmdQcm92aWRlcikge1xyXG5cdFx0Ly8kbG9jYXRpb25Qcm92aWRlclxyXG5cdFx0Ly9cdC5oYXNoUHJlZml4KCchJylcclxuXHRcdC8vXHQuaHRtbDVNb2RlKGZhbHNlKTtcclxuXHJcblx0XHQkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcclxuXHRcdFx0dmFyIHBhdGggPSAkbG9jYXRpb24udXJsKCkudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHRcdC8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgcGF0aCBhbHJlYWR5IGhhcyBhIHNsYXNoIHdoZXJlIGl0IHNob3VsZCBiZVxyXG5cdFx0XHRpZiAocGF0aFtwYXRoLmxlbmd0aCAtIDFdID09PSAnLycgfHwgcGF0aC5pbmRleE9mKCcvPycpID4gLTEpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChwYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGgucmVwbGFjZSgnPycsICcvPycpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gcGF0aCArICcvJztcclxuXHRcdH0pXHJcblx0XHQub3RoZXJ3aXNlKCcvJyk7XHJcblxyXG5cdFx0JHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuc3RyaWN0TW9kZShmYWxzZSk7XHJcblxyXG4gICAgICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXHJcbiAgICAgICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZScpXHJcbiAgICAgICAgICAgIC5hY2NlbnRQYWxldHRlKCdyZWQnKTtcclxuXHJcblx0fSlcclxuXHJcblx0LnJ1bihmdW5jdGlvbiBwb2tlVHJhaW5lclJ1biAoJHN0YXRlLCAkcm9vdFNjb3BlLCAkZG9jdW1lbnQpIHtcclxuXHRcdCRyb290U2NvcGUuJG9uKCdpbnZlbnRvcnk6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKXtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcIkludmVudG9yeSEhIDpEIFwiKVxyXG5cdFx0fSk7XHJcblx0XHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQkZG9jdW1lbnQuZmluZCgnLnNjcmVlbi1sb2FkaW5nLW92ZXJsYXknKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHR9KTtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKXtcclxuXHRcdFx0JGRvY3VtZW50LmZpbmQoJy5zY3JlZW4tbG9hZGluZy1vdmVybGF5JykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdFx0fSk7XHJcblx0XHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XHJcblx0XHRcdGlmIChlcnJvciA9PT0gXCJvZmZsaW5lXCIpIHtcclxuXHRcdFx0XHQkc3RhdGUuZ28oXCJwdWJsaWMudXNlcnNcIik7XHJcblx0XHRcdFx0JGRvY3VtZW50LmZpbmQoJy5zY3JlZW4tbG9hZGluZy1vdmVybGF5JykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KVxyXG5cclxuOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5Nb2R1bGUuU29ja2V0RXZlbnRFbWl0dGVyJywgWydQb2tldHJhaW5lci5TZXJ2aWNlLlNvY2tldCddKVxyXG4gICAgLnJ1bihmdW5jdGlvbiBydW5Tb2NrZXRFbWl0dGVyKCRyb290U2NvcGUsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuXHJcbiAgICAgICAgUG9rZVNvY2tldC5mb3J3YXJkKFNvY2tldEV2ZW50LlVzZXJTdGF0dXMpO1xyXG5cclxuICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LkRhdGEsIGZ1bmN0aW9uIGdldFNvY2tldFB1c2goZGF0YSl7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJHb3QgcHVzaCBkYXRhOiBcIiwgZGF0YSk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChkYXRhLmV2ZW50ICsgXCI6XCIgKyBkYXRhLmFjdGlvbiwgZGF0YS5kYXRhKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQnJvYWRjYXN0IGV2ZW50cyB1c2luZyAkcm9vdFNjb3BlLiRicm9hZGNhc3QoW25hbWVdLCBbZGF0YV0pO1xyXG4gICAgfSlcclxuXHJcbjsiLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU3RhdGUuQWJzdHJhY3RzJywgW1xyXG4gICAgJ3VpLnJvdXRlcidcclxuXSlcclxuXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncHVibGljJywge1xyXG4gICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaGVhZGVyXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0ZXMvYWJzdHJhY3RzL2hlYWRlci50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb250ZW50XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8dWktdmlldy8+J1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBTb2NrZXRFdmVudCwgUG9rZVNvY2tldCwgTmF2aWdhdGlvbiwgVXNlckxpc3Qpe1xyXG4gICAgICAgICRzY29wZS5uYXZpZ2F0aW9uID0gTmF2aWdhdGlvbi5wcmltYXJ5LmdldCgpO1xyXG4gICAgICAgICRzY29wZS5zdGF0ZSA9ICRzdGF0ZS5jdXJyZW50Lm5hbWU7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIgPSBVc2VyTGlzdC5nZXRDdXJyZW50KCk7XHJcblxyXG4gICAgICAgICRzY29wZS5yZWxvYWRfYXBpID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZWxvYWRBUEksIHt1c2VybmFtZTogJHNjb3BlLnVzZXIudXNlcm5hbWV9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUucmVzZXRfc3RhdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlc2V0U3RhdHMsIHt1c2VybmFtZTogJHNjb3BlLnVzZXIudXNlcm5hbWV9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc3RvcF9ib3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlN0b3AsIHt1c2VybmFtZTogJHNjb3BlLnVzZXIudXNlcm5hbWV9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc3RhcnRfYm90ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5TdGFydCwge3VzZXJuYW1lOiAkc2NvcGUudXNlci51c2VybmFtZX0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byBsaXN0ZW4gZm9yIG5ldyBldmVudHNcclxuICAgICAgICAkc2NvcGUuJG9uKFNvY2tldEV2ZW50Ll9wcmVmaXggKyBTb2NrZXRFdmVudC5Vc2VyU3RhdHVzLCBmdW5jdGlvbihldmVudCwgdXNlcikge1xyXG4gICAgICAgICAgICBVc2VyTGlzdC51cGRhdGUodXNlcik7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyID0gVXNlckxpc3QuZ2V0Q3VycmVudCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignY3VycmVudFVzZXJfOmNoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyID0gVXNlckxpc3QuZ2V0Q3VycmVudCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xyXG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUgPSB0b1N0YXRlLm5hbWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciB1c2VyRXZlbnRDYiA9IGZ1bmN0aW9uIHVzZXJFdmVudENiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCAhbWVzc2FnZS5zdWNjZXNzIHx8ICFhbmd1bGFyLmlzQXJyYXkobWVzc2FnZS51c2Vycykpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoU29ja2V0RXZlbnQuVXNlckxpc3QsIHVzZXJFdmVudENiKTtcclxuICAgICAgICAgICAgVXNlckxpc3Quc2V0KG1lc3NhZ2UudXNlcnMpO1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlciA9IFVzZXJMaXN0LmdldEN1cnJlbnQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnN0YXRlICE9PSAncHVibGljLnVzZXJzJykge1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlVzZXJMaXN0LCB1c2VyRXZlbnRDYik7XHJcblxyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuVXNlckxpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlN0YXRlLlN0YXR1cycsIFtcclxuICAgICd1aS5yb3V0ZXInLFxyXG4gICAgJ3VpR21hcGdvb2dsZS1tYXBzJyxcclxuICAgICdjaGFydC5qcycsXHJcbiAgICAnZWFzeXBpZWNoYXJ0JyxcclxuICAgICdkYXRhdGFibGVzJyxcclxuICAgICd1aS1sZWFmbGV0JyxcclxuICAgICduZW1Mb2dnaW5nJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcikge1xyXG5cclxuICAgICAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgICAgICAvL2tleTogJzxNQVBTIEFQSSBLRVk+JyxcclxuICAgICAgICAgICAgdjogJzMuMjQnLFxyXG4gICAgICAgICAgICBsaWJyYXJpZXM6ICd3ZWF0aGVyLGdlb21ldHJ5LHZpc3VhbGl6YXRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwdWJsaWMuZGFzaGJvYXJkJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvZGFzaGJvYXJkLzp1c2VybmFtZScsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVMb2NhdGlvbkRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uRGF0YUNiID0gZnVuY3Rpb24gbG9jYXRpb25EYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnbG9jYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBsb2NhdGlvbkRhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnbG9jYXRpb24nXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnlEYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZUludmVudG9yeURhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludmVudG9yeURhdGFDYiA9IGZ1bmN0aW9uIGludmVudG9yeURhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdpbnZlbnRvcnknKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIGludmVudG9yeURhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnaW52ZW50b3J5J11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQbGF5ZXJEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJEYXRhQ2IgPSBmdW5jdGlvbiBwbGF5ZXJEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAncGxheWVyJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBwbGF5ZXJEYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3BsYXllciddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHBsYXllclN0YXRzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQbGF5ZXJTdGF0c0RhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllclN0YXRzRGF0YUNiID0gZnVuY3Rpb24gcGxheWVyU3RhdHNEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAncGxheWVyX3N0YXRzJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBwbGF5ZXJTdGF0c0RhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsncGxheWVyX3N0YXRzJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcG9rZW1vbkRhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlUG9rZW1vbkRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBva2Vtb25EYXRhQ2IgPSBmdW5jdGlvbiBwb2tlbW9uRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ3Bva2Vtb24nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIHBva2Vtb25EYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3Bva2Vtb24nXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBhdHRhY2tzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVBdHRhY2tzRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0YWNrc0RhdGFDYiA9IGZ1bmN0aW9uIGF0dGFja3NEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnYXR0YWNrcycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgYXR0YWNrc0RhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnYXR0YWNrcyddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGFzaGJvYXJkQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGVzL2Rhc2hib2FyZC9kYXNoYm9hcmQudHBsLmh0bWwnXHJcbiAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KVxyXG5cclxuICAgIC5ydW4oZnVuY3Rpb24gKE5hdmlnYXRpb24pIHtcclxuICAgICAgICBOYXZpZ2F0aW9uLnByaW1hcnkucmVnaXN0ZXIoXCJVc2Vyc1wiLCBcInB1YmxpYy51c2Vyc1wiLCAzMCwgJ21kIG1kLWV2ZW50LWF2YWlsYWJsZScsICdwdWJsaWMudXNlcnMnKTtcclxuICAgIH0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCAkbWRUb2FzdCwgUG9rZVNvY2tldCwgbGVhZmxldERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlckxpc3QsIGxvY2F0aW9uRGF0YSwgaW52ZW50b3J5RGF0YSwgcGxheWVyRGF0YSwgcGxheWVyU3RhdHNEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBva2Vtb25EYXRhLCBhdHRhY2tzRGF0YSwgU29ja2V0RXZlbnQsIERUT3B0aW9uc0J1aWxkZXIpIHtcclxuICAgICAgICBVc2VyTGlzdC5zZXRDdXJyZW50KCRzdGF0ZVBhcmFtcy51c2VybmFtZSk7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFwiY3VycmVudFVzZXJfOmNoYW5nZWRcIik7XHJcblxyXG4gICAgICAgIHZhciB1c2VyRXZlbnRVcGRhdGUgPSBmdW5jdGlvbiB1c2VyRXZlbnRVcGRhdGUoZXZlbnQsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtcy51c2VybmFtZSA9PSBtZXNzYWdlLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXMgPT0gJ29mZmxpbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdwdWJsaWMudXNlcnMnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLiRvbihTb2NrZXRFdmVudC5fcHJlZml4ICsgU29ja2V0RXZlbnQuVXNlclN0YXR1cywgdXNlckV2ZW50VXBkYXRlKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbihcIiRkZXN0cm95XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5MZWF2ZSwge3Jvb206ICRzdGF0ZVBhcmFtcy51c2VybmFtZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEpvaW4gc3BlY2lmaWMgdXNlciByb29tXHJcbiAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkpvaW4sIHtyb29tOiAkc3RhdGVQYXJhbXMudXNlcm5hbWV9KTtcclxuXHJcbiAgICAgICAgLyoqIFRSQU5TRkVSICoqL1xyXG4gICAgICAgIHZhciB0cmFuc2Zlcl9wX2lkO1xyXG4gICAgICAgIHZhciB0cmFuc2ZlckNiID0gZnVuY3Rpb24gdHJhbnNmZXJDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0kc2NvcGUucG9rZW1vbi5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHRyYW5zZmVyX3BfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24uc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYW5zZmVyX3BfaWQgPSAwO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LlRyYW5zZmVyLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS50cmFuc2ZlciA9IGZ1bmN0aW9uKHBfaWQpIHtcclxuICAgICAgICAgICAgdHJhbnNmZXJfcF9pZCA9IHBfaWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlRyYW5zZmVyLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlRyYW5zZmVyLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgcF9pZDogcF9pZH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBFVk9MVkUgKiovXHJcbiAgICAgICAgdmFyIGV2b2x2ZUNiID0gZnVuY3Rpb24gZXZvbHZlQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LkV2b2x2ZSwgZXZvbHZlQ2IpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLmV2b2x2ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5ldm9sdmUgPSBmdW5jdGlvbihwX2lkKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LkV2b2x2ZSwgZXZvbHZlQ2IpO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuRXZvbHZlLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgcF9pZDogcF9pZH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBTTklQRSAqKi9cclxuICAgICAgICB2YXIgc25pcGVkQ2IgPSBmdW5jdGlvbiBzbmlwZWRDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIC8vbWVzc2FnZS5zdWNjZXNzO1xyXG4gICAgICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5TbmlwZSwgc25pcGVkQ2IpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnNuaXBlX2Nvb3JkcyA9ICcnO1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9hdXRvID0gZmFsc2U7IC8vIG5vdCBpbXBsZW1lbnRlZFxyXG4gICAgICAgICRzY29wZS5zbmlwZSA9IGZ1bmN0aW9uKHNuaXBlX2Nvb3Jkcykge1xyXG4gICAgICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlNuaXBlLCBzbmlwZWRDYik7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5TbmlwZSwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIGxhdGxuZzogc25pcGVfY29vcmRzfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuJG9uKCdpbnZlbnRvcnk6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IFxyXG4gwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUuaW52ZW50b3J5ID0gZGF0YTtcclxuICAgICAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3BsYXllcl9zdGF0czp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBsYXllclN0YXRzID0gZGF0YTtcclxuICAgICAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3BsYXllcjp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBsYXllciA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAvLyB0aGlzIG1ha2VzIHRoZSBwb2tlbW9uIHRhYmxlIGdvIGNyYXp5IGZvciBhIGJpdFxyXG4gICAgICAgIC8vIHdlIGluc2VydCAvIGRlbGV0ZSBiYXNlZCBvbiBvdGhlciBldmVucywgc28gaXQgX3Nob3VsZF8gYmUgYWNjdXJhdGUgYW55d2F5XHJcbiAgICAgICAgLyokc2NvcGUuJG9uKCdjYXVnaHRfcG9rZW1vbjp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24gPSBkYXRhO1xyXG4gwqAgwqAgwqAgwqB9KTsqL1xyXG4gXHJcbiAgICAgICAgJHNjb3BlLiRvbigncG9rZW1vbjpjYXVnaHQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbiA9IGRhdGE7XHJcbiAgICAgICAgICAgIC8vcG9rZW1vbi5jcmVhdGlvbl90aW1lX21zID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wb2tlbW9uLnB1c2gocG9rZW1vbik7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnQ2F1Z2h0OiAnICsgcG9rZW1vbi5uYW1lICsgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb24uaXYpICsgJyB8IENQOiAnICsgcG9rZW1vbi5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246cmVsZWFzZWQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbiA9IGRhdGE7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0kc2NvcGUucG9rZW1vbi5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBva2Vtb25baV0uaWQgPT0gcG9rZW1vbi5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnUmVsZWFzZWQ6ICcgKyBwb2tlbW9uLm5hbWUgKyAnIChJVjogJyArIE1hdGguZmxvb3IocG9rZW1vbi5pdikgKyAnIHwgQ1A6ICcgKyBwb2tlbW9uLmNwICsgJyknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbigncG9rZW1vbjpldm9sdmVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb25fb2xkID0gZGF0YS5vbGQ7XHJcbiAgICAgICAgICAgIHZhciBwb2tlbW9uX25ldyA9IGRhdGEubmV3O1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHBva2Vtb25fb2xkLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24uc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBva2Vtb24ucHVzaChwb2tlbW9uX25ldyk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRXZvbHZlZDogJyArIHBva2Vtb25fb2xkLm5hbWUgKyAnIHRvICcgKyBwb2tlbW9uX25ldy5uYW1lICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb25fbmV3Lml2KSArICcgfCBDUDogJyArIHBva2Vtb25fbmV3LmNwICsgJyknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignZm9ydDpzcHVuJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdGb3J0IHNwdW4sIHJld2FyZDogJyArIGRhdGEucmV3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuIFxyXG4gICAgICAgIHZhciBwb3NpdGlvblVwZGF0ZXMgPSAwO1xyXG4gwqAgwqAgwqAgwqAkc2NvcGUuJG9uKCdwb3NpdGlvbjp1cGRhdGUnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gwqAgwqAgwqAgwqAgwqAgwqBwb3NpdGlvblVwZGF0ZXMrKztcclxuIMKgIMKgIMKgIMKgIMKgIMKgaWYgKHBvc2l0aW9uVXBkYXRlcyAlIDUgPT0gMCkge1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUubWFya2Vycy5ib3QubGF0ID0gZGF0YVswXTtcclxuIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLm1hcmtlcnMuYm90LmxuZyA9IGRhdGFbMV07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoHZhciBuZXdMb2NhdGlvbiA9IHtsYXQ6IGRhdGFbMF0sIGxuZzogZGF0YVsxXX07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wYXRocy5tYWluLmxhdGxuZ3MucHVzaChuZXdMb2NhdGlvbik7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoH1cclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5wbGF5ZXIgPSBwbGF5ZXJEYXRhO1xyXG4gICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cyA9IHBsYXllclN0YXRzRGF0YTtcclxuICAgICAgICAkc2NvcGUuaW52ZW50b3J5ID0gaW52ZW50b3J5RGF0YTtcclxuICAgICAgICAkc2NvcGUucG9rZW1vbiA9IHBva2Vtb25EYXRhO1xyXG4gICAgICAgICRzY29wZS5hdHRhY2tzID0gYXR0YWNrc0RhdGE7XHJcblxyXG4gICAgICAgIHZhciB1cGRhdGVQZXJjZW50YWdlcyA9IGZ1bmN0aW9uIHVwZGF0ZVBlcmNlbnRhZ2VzKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMueHBQZXJjZW50ID0gTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgICAgICgkc2NvcGUucGxheWVyU3RhdHMuZXhwZXJpZW5jZSAtICRzY29wZS5wbGF5ZXJTdGF0cy5wcmV2X2xldmVsX3hwKVxyXG4gICAgICAgICAgICAgICAgLygkc2NvcGUucGxheWVyU3RhdHMubmV4dF9sZXZlbF94cCAtICRzY29wZS5wbGF5ZXJTdGF0cy5wcmV2X2xldmVsX3hwKVxyXG4gICAgICAgICAgICAgICAgKjEwMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMudW5pcXVlUG9rZWRleFBlcmNlbnQgPSBNYXRoLmZsb29yKCRzY29wZS5wbGF5ZXJTdGF0cy51bmlxdWVfcG9rZWRleF9lbnRyaWVzIC8gMTUxICogMTAwKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnBva2Vtb25JbnZQZXJjZW50ID0gTWF0aC5mbG9vcigkc2NvcGUucG9rZW1vbi5sZW5ndGggLyAkc2NvcGUucGxheWVyLm1heF9wb2tlbW9uX3N0b3JhZ2UgICogMTAwKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLml0ZW1zSW52UGVyY2VudCA9IE1hdGguZmxvb3IoJHNjb3BlLmludmVudG9yeS5pdGVtX2NvdW50IC8gJHNjb3BlLnBsYXllci5tYXhfaXRlbV9zdG9yYWdlICAqIDEwMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ5IGRpcnR5IGZpeCB0byBtYWtlIHRoZSBsZWFmbGV0IG1hcCBsb2FkIGZ1bGxzY3JlZW5cclxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgbWFwLmludmFsaWRhdGVTaXplKCk7IH0sIDMwMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUubWFwID0geyBjZW50ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdDogbG9jYXRpb25EYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG5nOiBsb2NhdGlvbkRhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLm1hcmtlcnMgPSB7XHJcbiAgICAgICAgICAgIGJvdDoge1xyXG4gICAgICAgICAgICAgICAgbGF0OiBsb2NhdGlvbkRhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICBsbmc6IGxvY2F0aW9uRGF0YVsxXSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICRzY29wZS5wbGF5ZXIudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICBmb2N1czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnBhdGhzID0ge1xyXG4gICAgICAgICAgICBtYWluOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNGNDQzMzYnLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0OiA0LFxyXG4gICAgICAgICAgICAgICAgbGF0bG5nczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHsgbGF0OiBsb2NhdGlvbkRhdGFbMF0sIGxuZzogbG9jYXRpb25EYXRhWzFdIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb25EYXRhVGFibGVPcHRpb25zID0gRFRPcHRpb25zQnVpbGRlci5uZXdPcHRpb25zKClcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ29yZGVyJywgW1sgMCwgXCJkZXNjXCIgXV0pXHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzdGF0ZVNhdmUnLCB0cnVlKTtcclxuICAgICAgICAgICAgLyoud2l0aE9wdGlvbignc2Nyb2xsWScsICc3NXZoJylcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ3Njcm9sbFgnLCB0cnVlKTtcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ3BhZ2luZycsIHRydWUpKi9cclxuXHJcbiAgICAgICAgJHNjb3BlLmV4cEx2bE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGU6e1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTAwMCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJDb2xvcjonIzAzQTlGNCcsXHJcbiAgICAgICAgICAgIHNjYWxlQ29sb3I6ZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDoxMCxcclxuICAgICAgICAgICAgbGluZUNhcDonY2lyY2xlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS51bmlxdWVQb2tlZGV4T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjRkZDMTA3JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb25JbnZPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyMwMDk2ODgnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaXRlbXNJbnZPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyNGNDQzMzYnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pXHJcbjtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlN0YXRlLlVzZXJzJywgW1xyXG4gICAgJ3VpLnJvdXRlcidcclxuXSlcclxuXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlcikge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwdWJsaWMudXNlcnMnLCB7XHJcbiAgICAgICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICBVc2VyczogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsICdVc2VyTGlzdCcsIGZ1bmN0aW9uIHJlc29sdmVVc2VycygkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCwgVXNlckxpc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJFdmVudENiID0gZnVuY3Rpb24gdXNlckV2ZW50Q2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8ICFtZXNzYWdlLnN1Y2Nlc3MgfHwgIWFuZ3VsYXIuaXNBcnJheShtZXNzYWdlLnVzZXJzKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5Vc2VyTGlzdCwgdXNlckV2ZW50Q2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVc2VyTGlzdC5zZXQobWVzc2FnZS51c2Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuVXNlckxpc3QsIHVzZXJFdmVudENiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRW1pdCB0aGUgZXZlbnQgdG8gb3VyIHNvY2tldFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIGxpc3RlbmluZyBmb3IgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlVzZXJMaXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy91c2Vycy91c2Vycy50cGwuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pXHJcblxyXG4gICAgLnJ1bihmdW5jdGlvbiAoTmF2aWdhdGlvbikge1xyXG4gICAgICAgIE5hdmlnYXRpb24ucHJpbWFyeS5yZWdpc3RlcihcIlVzZXJzXCIsIFwicHVibGljLnVzZXJzXCIsIDMwLCAnbWQgbWQtZXZlbnQtYXZhaWxhYmxlJywgJ3B1YmxpYy51c2VycycpO1xyXG4gICAgfSlcclxuXHJcbiAgICAuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgZnVuY3Rpb24gVXNlcnNDb250cm9sbGVyKCRzY29wZSwgVXNlckxpc3QsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KSB7XHJcbiAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCBhbnkgZGF0YSBmcm9tIHRoZSBnbG9iYWwgc2NvcGUgaGVyZS4uLiB5ZXQ/XHJcbiAgICAgICAgLy9Qb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuSm9pbiwge3Jvb206ICdnbG9iYWwnfSk7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJzID0gVXNlckxpc3QuZ2V0KCk7XHJcbiAgICAgICAgVXNlckxpc3Quc2V0Q3VycmVudCgnJyk7XHJcblxyXG4gICAgICAgIHZhciB1c2VyRXZlbnRVcGRhdGUgPSBmdW5jdGlvbiB1c2VyRXZlbnRVcGRhdGUoZXZlbnQsIHVzZXIpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gVXNlckxpc3QudXBkYXRlKHVzZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byBsaXN0ZW4gZm9yIG5ldyBldmVudHNcclxuICAgICAgICAkc2NvcGUuJG9uKFNvY2tldEV2ZW50Ll9wcmVmaXggKyBTb2NrZXRFdmVudC5Vc2VyU3RhdHVzLCB1c2VyRXZlbnRVcGRhdGUpO1xyXG4gICAgfSlcclxuO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU2VydmljZS5OYXZpZ2F0aW9uJywgW10pXHJcblxyXG4gICAgLmZhY3RvcnkoJ05hdmlnYXRpb24nLCBmdW5jdGlvbiBOYXZpZ2F0aW9uRmFjdG9yeSgpIHtcclxuICAgICAgICB2YXIgaGVhZGVyTmF2ID0gW107XHJcblxyXG4gICAgICAgIHZhciBnZXRQcmltYXJ5TWVudSA9IGZ1bmN0aW9uIGdldFByaW1hcnlNZW51KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyTmF2LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcmlvcml0eSA9IGEuUHJpb3JpdHkgLSBiLlByaW9yaXR5O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLkxhYmVsLmxvY2FsZUNvbXBhcmUoYi5MYWJlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaW9yaXR5O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciByZWdpc3RlclByaW1hcnlNZW51ID0gZnVuY3Rpb24gcmVnaXN0ZXJQcmltYXJ5TWVudShsYWJlbCwgc3RhdGUsIHByaW9yaXR5LCBpY29uLCBhY3RpdmVTdGF0ZSkge1xyXG4gICAgICAgICAgICBpZiggdHlwZW9mKGljb24pICE9PSBcInN0cmluZ1wiKXtcclxuICAgICAgICAgICAgICAgIGljb24gPSBcIm1kIG1kLWNoZXZyb24tcmlnaHRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiggdHlwZW9mKGFjdGl2ZVN0YXRlKSAhPT0gXCJzdHJpbmdcIil7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVTdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChwcmlvcml0eSkgIT09IFwibnVtYmVyXCIgfHwgcHJpb3JpdHkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eSA9IDEwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBoZWFkZXJOYXYucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBMYWJlbDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgICBTdGF0ZTogc3RhdGUsXHJcbiAgICAgICAgICAgICAgICBBY3RpdmVTdGF0ZTogYWN0aXZlU3RhdGUsXHJcbiAgICAgICAgICAgICAgICBQcmlvcml0eTogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICBJY29uOiBpY29uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByaW1hcnk6IHtcclxuICAgICAgICAgICAgICAgIGdldDogZ2V0UHJpbWFyeU1lbnUsXHJcbiAgICAgICAgICAgICAgICByZWdpc3RlcjogcmVnaXN0ZXJQcmltYXJ5TWVudVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TZXJ2aWNlLlNvY2tldEV2ZW50JywgW10pXHJcbiAgICAuZmFjdG9yeSgnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgX3ByZWZpeDogXCJzb2NrZXQ6XCIsXHJcbiAgICAgICAgICAgIFVzZXJMaXN0OiAndXNlcnMnLFxyXG4gICAgICAgICAgICBVc2VyU3RhdHVzOiAndXNlcl9zdGF0dXMnLFxyXG4gICAgICAgICAgICBSZXF1ZXN0OiAncHVsbCcsXHJcbiAgICAgICAgICAgIERhdGE6ICdwdXNoJyxcclxuICAgICAgICAgICAgSm9pbjogJ2pvaW4nLFxyXG4gICAgICAgICAgICBMZWF2ZTogJ2xlYXZlJyxcclxuICAgICAgICAgICAgVHJhbnNmZXI6ICd0cmFuc2ZlcicsXHJcbiAgICAgICAgICAgIEV2b2x2ZTogJ2V2b2x2ZScsXHJcbiAgICAgICAgICAgIFNuaXBlOiAnc25pcGUnLFxyXG4gICAgICAgICAgICBTdGFydDogJ3N0YXJ0JyxcclxuICAgICAgICAgICAgU3RvcDogJ3N0b3AnLFxyXG4gICAgICAgICAgICBSZXNldFN0YXRzOiAncmVzZXRfc3RhdHMnLFxyXG4gICAgICAgICAgICBSZWxvYWRBUEk6ICdyZWxvYWRfYXBpJ1xyXG4gICAgICAgIH1cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TZXJ2aWNlLlVzZXJMaXN0JywgW10pXHJcblxyXG4gICAgLmZhY3RvcnkoJ1VzZXJMaXN0JywgZnVuY3Rpb24gVXNlckxpc3RGYWN0b3J5KCkge1xyXG4gICAgICAgIHZhciB1c2VyTGlzdCA9IFtdO1xyXG4gICAgICAgIHZhciBjdXJyZW50VXNlciA9ICcnO1xyXG5cclxuICAgICAgICB2YXIgc2V0VXNlcnMgPSBmdW5jdGlvbiBzZXRVc2Vycyh1c2Vycykge1xyXG4gICAgICAgICAgICAvLyBzaG93IGFsbCB1c2VycyB0byB1bmtub3duIHN0YXRlIHVudGlsIHdlIHJlY2VpdmUgYSBwcm9wZXIgc3RhdGVcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdXNlcnNbaV0uc3RhdHVzID0gJ3Vua25vd24nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVzZXJMaXN0ID0gdXNlcnMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEudXNlcm5hbWUubG9jYWxlQ29tcGFyZShiLnVzZXJuYW1lKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdXNlckV2ZW50VXBkYXRlID0gZnVuY3Rpb24gdXNlckV2ZW50VXBkYXRlKHVzZXIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2VyTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJMaXN0W2ldLnVzZXJuYW1lID09IHVzZXIudXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyTGlzdFtpXS5zdGF0dXMgPSB1c2VyLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdXNlckxpc3Q7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZ2V0VXNlcnMgPSBmdW5jdGlvbiBnZXRVc2VycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJMaXN0O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNldEN1cnJlbnRVc2VyID0gZnVuY3Rpb24gc2V0Q3VycmVudFVzZXIodXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgY3VycmVudFVzZXIgPSB1c2VybmFtZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBnZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uIHNldEN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckxpc3RbaV0udXNlcm5hbWUgPT0gY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlckxpc3RbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNldDogc2V0VXNlcnMsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogdXNlckV2ZW50VXBkYXRlLFxyXG4gICAgICAgICAgICBnZXQ6IGdldFVzZXJzLFxyXG4gICAgICAgICAgICBzZXRDdXJyZW50OiBzZXRDdXJyZW50VXNlcixcclxuICAgICAgICAgICAgZ2V0Q3VycmVudDogZ2V0Q3VycmVudFVzZXJcclxuICAgICAgICB9O1xyXG4gICAgfSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
